5c868e7f4b18f58c0f8189c28fd31df4
'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var EventEmitter=require('EventEmitter');var EventEmitterWithHolding=require('EventEmitterWithHolding');var EventHolder=require('EventHolder');var invariant=require('fbjs/lib/invariant');var keyOf=require('fbjs/lib/keyOf');var TYPES_KEY=keyOf({__types:true});function mixInEventEmitter(cls,types){invariant(types,'Must supply set of valid event types');var target=cls.prototype||cls;invariant(!target.__eventEmitter,'An active emitter is already mixed in');var ctor=cls.constructor;if(ctor){invariant(ctor===Object||ctor===Function,'Mix EventEmitter into a class, not an instance');}if(target.hasOwnProperty(TYPES_KEY)){_extends(target.__types,types);}else if(target.__types){target.__types=_extends({},target.__types,types);}else{target.__types=types;}_extends(target,EventEmitterMixin);}var EventEmitterMixin={emit:function emit(eventType,a,b,c,d,e,_){return this.__getEventEmitter().emit(eventType,a,b,c,d,e,_);},emitAndHold:function emitAndHold(eventType,a,b,c,d,e,_){return this.__getEventEmitter().emitAndHold(eventType,a,b,c,d,e,_);},addListener:function addListener(eventType,listener,context){return this.__getEventEmitter().addListener(eventType,listener,context);},once:function once(eventType,listener,context){return this.__getEventEmitter().once(eventType,listener,context);},addRetroactiveListener:function addRetroactiveListener(eventType,listener,context){return this.__getEventEmitter().addRetroactiveListener(eventType,listener,context);},addListenerMap:function addListenerMap(listenerMap,context){return this.__getEventEmitter().addListenerMap(listenerMap,context);},addRetroactiveListenerMap:function addRetroactiveListenerMap(listenerMap,context){return this.__getEventEmitter().addListenerMap(listenerMap,context);},removeAllListeners:function removeAllListeners(){this.__getEventEmitter().removeAllListeners();},removeCurrentListener:function removeCurrentListener(){this.__getEventEmitter().removeCurrentListener();},releaseHeldEventType:function releaseHeldEventType(eventType){this.__getEventEmitter().releaseHeldEventType(eventType);},__getEventEmitter:function __getEventEmitter(){if(!this.__eventEmitter){var emitter=new EventEmitter();if(__DEV__){var EventValidator=require('EventValidator');emitter=EventValidator.addValidation(emitter,this.__types);}var holder=new EventHolder();this.__eventEmitter=new EventEmitterWithHolding(emitter,holder);}return this.__eventEmitter;}};module.exports=mixInEventEmitter;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1peEluRXZlbnRFbWl0dGVyLmpzIl0sIm5hbWVzIjpbIkV2ZW50RW1pdHRlciIsInJlcXVpcmUiLCJFdmVudEVtaXR0ZXJXaXRoSG9sZGluZyIsIkV2ZW50SG9sZGVyIiwiaW52YXJpYW50Iiwia2V5T2YiLCJUWVBFU19LRVkiLCJfX3R5cGVzIiwibWl4SW5FdmVudEVtaXR0ZXIiLCJjbHMiLCJ0eXBlcyIsInRhcmdldCIsInByb3RvdHlwZSIsIl9fZXZlbnRFbWl0dGVyIiwiY3RvciIsImNvbnN0cnVjdG9yIiwiT2JqZWN0IiwiRnVuY3Rpb24iLCJoYXNPd25Qcm9wZXJ0eSIsIkV2ZW50RW1pdHRlck1peGluIiwiZW1pdCIsImV2ZW50VHlwZSIsImEiLCJiIiwiYyIsImQiLCJlIiwiXyIsIl9fZ2V0RXZlbnRFbWl0dGVyIiwiZW1pdEFuZEhvbGQiLCJhZGRMaXN0ZW5lciIsImxpc3RlbmVyIiwiY29udGV4dCIsIm9uY2UiLCJhZGRSZXRyb2FjdGl2ZUxpc3RlbmVyIiwiYWRkTGlzdGVuZXJNYXAiLCJsaXN0ZW5lck1hcCIsImFkZFJldHJvYWN0aXZlTGlzdGVuZXJNYXAiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJyZW1vdmVDdXJyZW50TGlzdGVuZXIiLCJyZWxlYXNlSGVsZEV2ZW50VHlwZSIsImVtaXR0ZXIiLCJfX0RFVl9fIiwiRXZlbnRWYWxpZGF0b3IiLCJhZGRWYWxpZGF0aW9uIiwiaG9sZGVyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBV0EsYSxnT0FFQSxHQUFNQSxjQUFlQyxPQUFmLGdCQUFOLENBQ0EsR0FBTUMseUJBQTBCRCxPQUExQiwyQkFBTixDQUNBLEdBQU1FLGFBQWNGLE9BQWQsZUFBTixDQUVBLEdBQU1HLFdBQVlILE9BQVosc0JBQU4sQ0FJQSxHQUFNSSxPQUFRSixPQUFSLGtCQUFOLENBSUEsR0FBTUssV0FBWUQsTUFBTSxDQUFDRSxRQUFTLElBQVYsQ0FBTixDQUFsQixDQXVCQSxRQUFTQyxrQkFBVCxDQUEy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Q0FxQ3hCQyxzQkFBdUIsZ0NBQVcsQ0FDaEMsS0FBS1gsaUJBQUwsR0FBeUJXLHFCQUF6QixHQUNELENBdkN1QixDQXlDeEJDLHFCQUFzQiw4QkFBU25CLFNBQVQsQ0FBb0IsQ0FDeEMsS0FBS08saUJBQUwsR0FBeUJZLG9CQUF6QixDQUE4Q25CLFNBQTlDLEVBQ0QsQ0EzQ3VCLENBNkN4Qk8sa0JBQW1CLDRCQUFXLENBQzVCLEdBQUksQ0FBQyxLQUFLZixjQUFWLENBQTBCLENBQ3hCLEdBQUk0QixTQUFVLEdBQUl6QyxhQUFKLEVBQWQsQ0FDQSxHQUFJMEMsT0FBSixDQUFhLENBQ1gsR0FBTUMsZ0JBQWlCMUMsT0FBakIsa0JBQU4sQ0FDQXdDLFFBQVVFLGVBQWVDLGFBQWYsQ0FBNkJILE9BQTdCLENBQXNDLEtBQUtsQyxPQUEzQyxDQUFWLENBQ0QsQ0FFRCxHQUFNc0MsUUFBUyxHQUFJMUMsWUFBSixFQUFmLENBQ0EsS0FBS1UsY0FBTCxDQUFzQixHQUFJWCx3QkFBSixDQUE0QnVDLE9BQTVCLENBQXFDSSxNQUFyQyxDQUF0QixDQUNELENBQ0QsTUFBTyxNQUFLaEMsY0FBWixDQUNELENBekR1QixDQUExQixDQTREQWlDLE9BQU9DLE9BQVAsQ0FBaUJ2QyxpQkFBakIiLCJmaWxlIjoibWl4SW5FdmVudEVtaXR0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIG1peEluRXZlbnRFbWl0dGVyXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ0V2ZW50RW1pdHRlcicpO1xuY29uc3QgRXZlbnRFbWl0dGVyV2l0aEhvbGRpbmcgPSByZXF1aXJlKCdFdmVudEVtaXR0ZXJXaXRoSG9sZGluZycpO1xuY29uc3QgRXZlbnRIb2xkZXIgPSByZXF1aXJlKCdFdmVudEhvbGRlcicpO1xuXG5jb25zdCBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbi8qICRGbG93Rml4TWUoPj0wLjU0LjAgc2l0ZT1yZWFjdF9uYXRpdmVfb3NzKSBUaGlzIGNvbW1lbnQgc3VwcHJlc3NlcyBhbiBlcnJvclxuICogZm91bmQgd2hlbiBGbG93IHYwLjU0IHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZSBlcnJvciBkZWxldGUgdGhpcyBjb21tZW50IGFuZFxuICogcnVuIEZsb3cuICovXG5jb25zdCBrZXlPZiA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU9mJyk7XG5cbmltcG9ydCB0eXBlIEVtaXR0ZXJTdWJzY3JpcHRpb24gZnJvbSAnRW1pdHRlclN1YnNjcmlwdGlvbic7XG5cbmNvbnN0IFRZUEVTX0tFWSA9IGtleU9mKHtfX3R5cGVzOiB0cnVlfSk7XG5cbi8qKlxuICogQVBJIHRvIHNldHVwIGFuIG9iamVjdCBvciBjb25zdHJ1Y3RvciB0byBiZSBhYmxlIHRvIGVtaXQgZGF0YSBldmVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGZ1bmN0aW9uIERvZygpIHsgLi4uZG9nIHN0dWZmLi4uIH1cbiAqIG1peEluRXZlbnRFbWl0dGVyKERvZywge2Jhcms6IHRydWV9KTtcbiAqXG4gKiB2YXIgcHVwcHkgPSBuZXcgRG9nKCk7XG4gKiBwdXBweS5hZGRMaXN0ZW5lcignYmFyaycsIGZ1bmN0aW9uICh2b2x1bWUpIHtcbiAqICAgY29uc29sZS5sb2coJ1B1cHB5JywgdGhpcywgJ2JhcmtlZCBhdCB2b2x1bWU6Jywgdm9sdW1lKTtcbiAqIH0pO1xuICogcHVwcHkuZW1pdCgnYmFyaycsICdxdWlldCcpO1xuICogLy8gUHVwcHkgPHB1cHB5PiBiYXJrZWQgYXQgdm9sdW1lOiBxdWlldFxuICpcbiAqXG4gKiAvLyBBIFwic2luZ2xldG9uXCIgb2JqZWN0IG1heSBhbHNvIGJlIGNvbW1pc3Npb25lZDpcbiAqXG4gKiB2YXIgU2luZ2xldG9uID0ge307XG4gKiBtaXhJbkV2ZW50RW1pdHRlcihTaW5nbGV0b24sIHtsb25lbHk6IHRydWV9KTtcbiAqIFNpbmdsZXRvbi5lbWl0KCdsb25lbHknLCB0cnVlKTtcbiAqL1xuZnVuY3Rpb24gbWl4SW5FdmVudEVtaXR0ZXIoY2xzOiBGdW5jdGlvbiB8IE9iamVjdCwgdHlwZXM6IE9iamVjdCkge1xuICBpbnZhcmlhbnQodHlwZXMsICdNdXN0IHN1cHBseSBzZXQgb2YgdmFsaWQgZXZlbnQgdHlwZXMnKTtcblxuICAvLyBJZiB0aGlzIGlzIGEgY29uc3RydWN0b3IsIHdyaXRlIHRvIHRoZSBwcm90b3R5cGUsIG90aGVyd2lzZSB3cml0ZSB0byB0aGVcbiAgLy8gc2luZ2xldG9uIG9iamVjdC5cbiAgY29uc3QgdGFyZ2V0ID0gY2xzLnByb3RvdHlwZSB8fCBjbHM7XG5cbiAgaW52YXJpYW50KCF0YXJnZXQuX19ldmVudEVtaXR0ZXIsICdBbiBhY3RpdmUgZW1pdHRlciBpcyBhbHJlYWR5IG1peGVkIGluJyk7XG5cbiAgY29uc3QgY3RvciA9IGNscy5jb25zdHJ1Y3RvcjtcbiAgaWYgKGN0b3IpIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBjdG9yID09PSBPYmplY3QgfHwgY3RvciA9PT0gRnVuY3Rpb24sXG4gICAgICAnTWl4IEV2ZW50RW1pdHRlciBpbnRvIGEgY2xhc3MsIG5vdCBhbiBpbnN0YW5jZSdcbiAgICApO1xuICB9XG5cbiAgLy8gS2VlcCB0cmFjayBvZiB0aGUgcHJvdmlkZWQgdHlwZXMsIHVuaW9uIHRoZSB0eXBlcyBpZiB0aGV5IGFscmVhZHkgZXhpc3QsXG4gIC8vIHdoaWNoIGFsbG93cyBmb3IgcHJvdG90eXBlIHN1YmNsYXNzZXMgdG8gcHJvdmlkZSBtb3JlIHR5cGVzLlxuICBpZiAodGFyZ2V0Lmhhc093blByb3BlcnR5KFRZUEVTX0tFWSkpIHtcbiAgICBPYmplY3QuYXNzaWduKHRhcmdldC5fX3R5cGVzLCB0eXBlcyk7XG4gIH0gZWxzZSBpZiAodGFyZ2V0Ll9fdHlwZXMpIHtcbiAgICB0YXJnZXQuX190eXBlcyA9IE9iamVjdC5hc3NpZ24oe30sIHRhcmdldC5fX3R5cGVzLCB0eXBlcyk7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0Ll9fdHlwZXMgPSB0eXBlcztcbiAgfVxuICBPYmplY3QuYXNzaWduKHRhcmdldCwgRXZlbnRFbWl0dGVyTWl4aW4pO1xufVxuXG5jb25zdCBFdmVudEVtaXR0ZXJNaXhpbiA9IHtcbiAgZW1pdDogZnVuY3Rpb24oZXZlbnRUeXBlLCBhLCBiLCBjLCBkLCBlLCBfKSB7XG4gICAgcmV0dXJuIHRoaXMuX19nZXRFdmVudEVtaXR0ZXIoKS5lbWl0KGV2ZW50VHlwZSwgYSwgYiwgYywgZCwgZSwgXyk7XG4gIH0sXG5cbiAgZW1pdEFuZEhvbGQ6IGZ1bmN0aW9uKGV2ZW50VHlwZSwgYSwgYiwgYywgZCwgZSwgXykge1xuICAgIHJldHVybiB0aGlzLl9fZ2V0RXZlbnRFbWl0dGVyKCkuZW1pdEFuZEhvbGQoZXZlbnRUeXBlLCBhLCBiLCBjLCBkLCBlLCBfKTtcbiAgfSxcblxuICBhZGRMaXN0ZW5lcjogZnVuY3Rpb24oZXZlbnRUeXBlLCBsaXN0ZW5lciwgY29udGV4dCk6IEVtaXR0ZXJTdWJzY3JpcHRpb24ge1xuICAgIHJldHVybiB0aGlzLl9fZ2V0RXZlbnRFbWl0dGVyKCkuYWRkTGlzdGVuZXIoZXZlbnRUeXBlLCBsaXN0ZW5lciwgY29udGV4dCk7XG4gIH0sXG5cbiAgb25jZTogZnVuY3Rpb24oZXZlbnRUeXBlLCBsaXN0ZW5lciwgY29udGV4dCkge1xuICAgIHJldHVybiB0aGlzLl9fZ2V0RXZlbnRFbWl0dGVyKCkub25jZShldmVudFR5cGUsIGxpc3RlbmVyLCBjb250ZXh0KTtcbiAgfSxcblxuICBhZGRSZXRyb2FjdGl2ZUxpc3RlbmVyOiBmdW5jdGlvbihldmVudFR5cGUsIGxpc3RlbmVyLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIHRoaXMuX19nZXRFdmVudEVtaXR0ZXIoKS5hZGRSZXRyb2FjdGl2ZUxpc3RlbmVyKFxuICAgICAgZXZlbnRUeXBlLFxuICAgICAgbGlzdGVuZXIsXG4gICAgICBjb250ZXh0XG4gICAgKTtcbiAgfSxcblxuICBhZGRMaXN0ZW5lck1hcDogZnVuY3Rpb24obGlzdGVuZXJNYXAsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gdGhpcy5fX2dldEV2ZW50RW1pdHRlcigpLmFkZExpc3RlbmVyTWFwKGxpc3RlbmVyTWFwLCBjb250ZXh0KTtcbiAgfSxcblxuICBhZGRSZXRyb2FjdGl2ZUxpc3RlbmVyTWFwOiBmdW5jdGlvbihsaXN0ZW5lck1hcCwgY29udGV4dCkge1xuICAgIHJldHVybiB0aGlzLl9fZ2V0RXZlbnRFbWl0dGVyKCkuYWRkTGlzdGVuZXJNYXAobGlzdGVuZXJNYXAsIGNvbnRleHQpO1xuICB9LFxuXG4gIHJlbW92ZUFsbExpc3RlbmVyczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fX2dldEV2ZW50RW1pdHRlcigpLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB9LFxuXG4gIHJlbW92ZUN1cnJlbnRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fX2dldEV2ZW50RW1pdHRlcigpLnJlbW92ZUN1cnJlbnRMaXN0ZW5lcigpO1xuICB9LFxuXG4gIHJlbGVhc2VIZWxkRXZlbnRUeXBlOiBmdW5jdGlvbihldmVudFR5cGUpIHtcbiAgICB0aGlzLl9fZ2V0RXZlbnRFbWl0dGVyKCkucmVsZWFzZUhlbGRFdmVudFR5cGUoZXZlbnRUeXBlKTtcbiAgfSxcblxuICBfX2dldEV2ZW50RW1pdHRlcjogZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLl9fZXZlbnRFbWl0dGVyKSB7XG4gICAgICBsZXQgZW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICAgIGNvbnN0IEV2ZW50VmFsaWRhdG9yID0gcmVxdWlyZSgnRXZlbnRWYWxpZGF0b3InKTtcbiAgICAgICAgZW1pdHRlciA9IEV2ZW50VmFsaWRhdG9yLmFkZFZhbGlkYXRpb24oZW1pdHRlciwgdGhpcy5fX3R5cGVzKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaG9sZGVyID0gbmV3IEV2ZW50SG9sZGVyKCk7XG4gICAgICB0aGlzLl9fZXZlbnRFbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcldpdGhIb2xkaW5nKGVtaXR0ZXIsIGhvbGRlcik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9fZXZlbnRFbWl0dGVyO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IG1peEluRXZlbnRFbWl0dGVyO1xuIl19