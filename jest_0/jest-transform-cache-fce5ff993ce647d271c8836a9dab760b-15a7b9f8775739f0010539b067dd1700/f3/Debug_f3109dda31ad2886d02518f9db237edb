b39ff17576e35f1b3dddf91845517015
Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof(typeof Symbol==="function"?Symbol.iterator:"@@iterator")==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==(typeof Symbol==="function"?Symbol.prototype:"@@prototype")?"symbol":typeof obj;};exports.typeName=typeName;exports.spaces=spaces;exports.indent=indent;exports.debugNode=debugNode;exports.debugNodes=debugNodes;var _without=require("lodash/without");var _without2=_interopRequireDefault(_without);var _escape=require("lodash/escape");var _escape2=_interopRequireDefault(_escape);var _compact=require("lodash/compact");var _compact2=_interopRequireDefault(_compact);var _functionPrototype=require("function.prototype.name");var _functionPrototype2=_interopRequireDefault(_functionPrototype);var _isString=require("is-string");var _isString2=_interopRequireDefault(_isString);var _isNumberObject=require("is-number-object");var _isNumberObject2=_interopRequireDefault(_isNumberObject);var _isCallable=require("is-callable");var _isCallable2=_interopRequireDefault(_isCallable);var _isBooleanObject=require("is-boolean-object");var _isBooleanObject2=_interopRequireDefault(_isBooleanObject);var _objectInspect=require("object-inspect");var _objectInspect2=_interopRequireDefault(_objectInspect);var _RSTTraversal=require('./RSTTraversal');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}var booleanValue=Function.bind.call(Function.call,Boolean.prototype.valueOf);function typeName(node){return typeof node.type==='function'?node.type.displayName||(0,_functionPrototype2['default'])(node.type)||'Component':node.type;}function spaces(n){return Array(n+1).join(' ');}function indent(depth,string){return string.split('\n').map(function(x){return''+String(spaces(depth))+String(x);}).join('\n');}function propString(prop){if((0,_isString2['default'])(prop)){return(0,_objectInspect2['default'])(String(prop),{quoteStyle:'double'});}if((0,_isNumberObject2['default'])(prop)){return'{'+String((0,_objectInspect2['default'])(Number(prop)))+'}';}if((0,_isBooleanObject2['default'])(prop)){return'{'+String((0,_objectInspect2['default'])(booleanValue(prop)))+'}';}if((0,_isCallable2['default'])(prop)){return'{'+String((0,_objectInspect2['default'])(prop))+'}';}if((typeof prop==='undefined'?'undefined':_typeof(prop))==='object'){return'{{...}}';}return'{['+(typeof prop==='undefined'?'undefined':_typeof(prop))+']}';}function propsString(node){var props=(0,_RSTTraversal.propsOfNode)(node);var keys=(0,_without2['default'])(Object.keys(props),'children');return keys.map(function(key){return String(key)+'='+String(propString(props[key]));}).join(' ');}function indentChildren(childrenStrs,indentLength){return childrenStrs.length?'\n'+String(childrenStrs.map(function(x){return indent(indentLength,x);}).join('\n'))+'\n':'';}function debugNode(node){var indentLength=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(typeof node==='string'||typeof node==='number')return(0,_escape2['default'])(node);if(!node)return'';var childrenStrs=(0,_compact2['default'])((0,_RSTTraversal.childrenOfNode)(node).map(function(n){return debugNode(n,indentLength,options);}));var type=typeName(node);var props=options.ignoreProps?'':propsString(node);var beforeProps=props?' ':'';var afterProps=childrenStrs.length?'>':' ';var childrenIndented=indentChildren(childrenStrs,indentLength);var nodeClose=childrenStrs.length?'</'+String(type)+'>':'/>';return'<'+String(type)+beforeProps+String(props)+afterProps+String(childrenIndented)+nodeClose;}function debugNodes(nodes){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return nodes.map(function(node){return debugNode(node,undefined,options);}).join('\n\n\n');}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRlYnVnLmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJ0eXBlTmFtZSIsInNwYWNlcyIsImluZGVudCIsImRlYnVnTm9kZSIsImRlYnVnTm9kZXMiLCJfd2l0aG91dCIsInJlcXVpcmUiLCJfd2l0aG91dDIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2VzY2FwZSIsIl9lc2NhcGUyIiwiX2NvbXBhY3QiLCJfY29tcGFjdDIiLCJfZnVuY3Rpb25Qcm90b3R5cGUiLCJfZnVuY3Rpb25Qcm90b3R5cGUyIiwiX2lzU3RyaW5nIiwiX2lzU3RyaW5nMiIsIl9pc051bWJlck9iamVjdCIsIl9pc051bWJlck9iamVjdDIiLCJfaXNDYWxsYWJsZSIsIl9pc0NhbGxhYmxlMiIsIl9pc0Jvb2xlYW5PYmplY3QiLCJfaXNCb29sZWFuT2JqZWN0MiIsIl9vYmplY3RJbnNwZWN0IiwiX29iamVjdEluc3BlY3QyIiwiX1JTVFRyYXZlcnNhbCIsIl9fZXNNb2R1bGUiLCJib29sZWFuVmFsdWUiLCJGdW5jdGlvbiIsImJpbmQiLCJjYWxsIiwiQm9vbGVhbiIsInZhbHVlT2YiLCJub2RlIiwidHlwZSIsImRpc3BsYXlOYW1lIiwibiIsIkFycmF5Iiwiam9pbiIsImRlcHRoIiwic3RyaW5nIiwic3BsaXQiLCJtYXAiLCJ4IiwiU3RyaW5nIiwicHJvcFN0cmluZyIsInByb3AiLCJxdW90ZVN0eWxlIiwiTnVtYmVyIiwicHJvcHNTdHJpbmciLCJwcm9wcyIsInByb3BzT2ZOb2RlIiwia2V5cyIsImtleSIsImluZGVudENoaWxkcmVuIiwiY2hpbGRyZW5TdHJzIiwiaW5kZW50TGVuZ3RoIiwibGVuZ3RoIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwib3B0aW9ucyIsImNoaWxkcmVuT2ZOb2RlIiwiaWdub3JlUHJvcHMiLCJiZWZvcmVQcm9wcyIsImFmdGVyUHJvcHMiLCJjaGlsZHJlbkluZGVudGVkIiwibm9kZUNsb3NlIiwibm9kZXMiXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFPQyxjQUFQLENBQXNCQyxPQUF0QixDQUErQixZQUEvQixDQUE2QyxDQUMzQ0MsTUFBTyxJQURvQyxDQUE3QyxFQUlBLEdBQUlDLFNBQVUsTUFBT0MsT0FBUCxHQUFrQixVQUFsQixFQUFnQyxrQ0FBT0EsT0FBT0MsUUFBZCxpQkFBMkIsUUFBM0QsQ0FBc0UsU0FBVUMsR0FBVixDQUFlLENBQUUsTUFBTyxPQUFPQSxJQUFkLENBQW9CLENBQTNHLENBQThHLFNBQVVBLEdBQVYsQ0FBZSxDQUFFLE1BQU9BLE1BQU8sTUFBT0YsT0FBUCxHQUFrQixVQUF6QixFQUF1Q0UsSUFBSUMsV0FBSixHQUFvQkgsTUFBM0QsRUFBcUVFLGtDQUFRRixPQUFPSSxTQUFmLGVBQXJFLENBQWdHLFFBQWhHLENBQTJHLE1BQU9GLElBQXpILENBQStILENBQTVRLENBRUFMLFFBQVFRLFFBQVIsQ0FBbUJBLFFBQW5CLENBQ0FSLFFBQVFTLE1BQVIsQ0FBaUJBLE1BQWpCLENBQ0FULFFBQVFVLE1BQVIsQ0FBaUJBLE1BQWpCLENBQ0FWLFFBQVFXLFNBQVIsQ0FBb0JBLFNBQXBCLENBQ0FYLFFBQVFZLFVBQVIsQ0FBcUJBLFVBQXJCLENBRUEsR0FBSUMsVUFBV0MsT0FBWCxrQkFBSixDQUVBLEdBQUlDLFdBQVlDLHVCQUF1QkgsUUFBdkIsQ0FBaEIsQ0FFQSxHQUFJSSxTQUFVSCxPQUFWLGlCQUFKLENBRUEsR0FBSUksVUFBV0YsdUJBQXVCQyxPQUF2QixDQUFmLENBRUEsR0FBSUUsVUFBV0wsT0FBWCxrQkFBSixDQUVBLEdBQUlNLFdBQVlKLHVCQUF1QkcsUUFBdkIsQ0FBaEIsQ0FFQSxHQUFJRSxvQkFBcUJQLE9BQXJCLDJCQUFKLENBRUEsR0FBSVEscUJBQXNCTix1QkFBdUJLLGtCQUF2QixDQUExQixDQUVBLEdBQUlFLFdBQVlULE9BQVosYUFBSixDQUVBLEdBQUlVLFlBQWFSLHVCQUF1Qk8sU0FBdkIsQ0FBakIsQ0FFQSxHQUFJRSxpQkFBa0JYLE9BQWxCLG9CQUFKLENBRUEsR0FBSVksa0JBQW1CVix1QkFBdUJTLGVBQXZCLENBQXZCLENBRUEsR0FBSUUsYUFBY2IsT0FBZCxlQUFKLENBRUEsR0FBSWMsY0FBZVosdUJBQXVCVyxXQUF2QixDQUFuQixDQUVBLEdBQUlFLGtCQUFtQmYsT0FBbkIscUJBQUosQ0FFQSxHQUFJZ0IsbUJBQW9CZCx1QkFBdUJhLGdCQUF2QixDQUF4QixDQUVBLEdBQUlFLGdCQUFpQmpCLE9BQWpCLGtCQUFKLENBRUEsR0FBSWtCLGlCQUFrQmhCLHVCQUF1QmUsY0FBdkIsQ0FBdEIsQ0FFQSxHQUFJRSxlQUFnQm5CLFFBQVEsZ0JBQVIsQ0FBcEIsQ0FFQSxRQUFTRSx1QkFBVCxDQUFnQ1gsR0FBaEMsQ0FBcUMsQ0FBRSxNQUFPQSxNQUFPQSxJQUFJNkIsVUFBWCxDQUF3QjdCLEdBQXhCLENBQThCLENBQUUsVUFBV0EsR0FBYixDQUFyQyxDQUEwRCxDQUVqRyxHQUFJOEIsY0FBZUMsU0FBU0MsSUFBVCxDQUFjQyxJQUFkLENBQW1CRixTQUFTRSxJQUE1QixDQUFrQ0MsUUFBUWhDLFNBQVIsQ0FBa0JpQyxPQUFwRCxDQUFuQixDQUVBLFFBQVNoQyxTQUFULENBQWtCaUMsSUFBbEIsQ0FBd0IsQ0FDdEIsTUFBTyxPQUFPQSxNQUFLQyxJQUFaLEdBQXFCLFVBQXJCLENBQWtDRCxLQUFLQyxJQUFMLENBQVVDLFdBQVYsRUFBeUIsQ0FBQyxFQUFHckIsb0JBQW9CLFNBQXBCLENBQUosRUFBb0NtQixLQUFLQyxJQUF6QyxDQUF6QixFQUEyRSxXQUE3RyxDQUEySEQsS0FBS0MsSUFBdkksQ0FDRCxDQUVELFFBQVNqQyxPQUFULENBQWdCbUMsQ0FBaEIsQ0FBbUIsQ0FDakIsTUFBT0MsT0FBTUQsRUFBSSxDQUFWLEVBQWFFLElBQWIsQ0FBa0IsR0FBbEIsQ0FBUCxDQUNELENBRUQsUUFBU3BDLE9BQVQsQ0FBZ0JxQyxLQUFoQixDQUF1QkMsTUFBdkIsQ0FBK0IsQ0FDN0IsTUFBT0EsUUFBT0MsS0FBUCxDQUFhLElBQWIsRUFBbUJDLEdBQW5CLENBQXVCLFNBQVVDLENBQVYsQ0FBYSxDQUN6QyxNQUFPLEdBQUtDLE9BQU8zQyxPQUFPc0MsS0FBUCxDQUFQLENBQUwsQ0FBNkJLLE9BQU9ELENBQVAsQ0FBcEMsQ0FDRCxDQUZNLEVBRUpMLElBRkksQ0FFQyxJQUZELENBQVAsQ0FHRCxDQUVELFFBQVNPLFdBQVQsQ0FBb0JDLElBQXBCLENBQTBCLENBQ3hCLEdBQUksQ0FBQyxFQUFHOUIsV0FBVyxTQUFYLENBQUosRUFBMkI4QixJQUEzQixDQUFKLENBQXNDLENBQ3BDLE1BQU8sQ0FBQyxFQUFHdEIsZ0JBQWdCLFNBQWhCLENBQUosRUFBZ0NvQixPQUFPRSxJQUFQLENBQWhDLENBQThDLENBQUVDLFdBQVksUUFBZCxDQUE5QyxDQUFQLENBQ0QsQ0FDRCxHQUFJLENBQUMsRUFBRzdCLGlCQUFpQixTQUFqQixDQUFKLEVBQWlDNEIsSUFBakMsQ0FBSixDQUE0QyxDQUMxQyxNQUFPLElBQU1GLE9BQU8sQ0FBQyxFQUFHcEIsZ0JBQWdCLFNBQWhCLENBQUosRUFBZ0N3QixPQUFPRixJQUFQLENBQWhDLENBQVAsQ0FBTixDQUE4RCxHQUFyRSxDQUNELENBQ0QsR0FBSSxDQUFDLEVBQUd4QixrQkFBa0IsU0FBbEIsQ0FBSixFQUFrQ3dCLElBQWxDLENBQUosQ0FBNkMsQ0FDM0MsTUFBTyxJQUFNRixPQUFPLENBQUMsRUFBR3BCLGdCQUFnQixTQUFoQixDQUFKLEVBQWdDRyxhQUFhbUIsSUFBYixDQUFoQyxDQUFQLENBQU4sQ0FBb0UsR0FBM0UsQ0FDRCxDQUNELEdBQUksQ0FBQyxFQUFHMUIsYUFBYSxTQUFiLENBQUosRUFBNkIwQixJQUE3QixDQUFKLENBQXdDLENBQ3RDLE1BQU8sSUFBTUYsT0FBTyxDQUFDLEVBQUdwQixnQkFBZ0IsU0FBaEIsQ0FBSixFQUFnQ3NCLElBQWhDLENBQVAsQ0FBTixDQUFzRCxHQUE3RCxDQUNELENBQ0QsR0FBSSxDQUFDLE1BQU9BLEtBQVAsR0FBZ0IsV0FBaEIsQ0FBOEIsV0FBOUIsQ0FBNENwRCxRQUFRb0QsSUFBUixDQUE3QyxJQUFnRSxRQUFwRSxDQUE4RSxDQUM1RSxNQUFPLFNBQVAsQ0FDRCxDQUNELE1BQU8sTUFBUSxNQUFPQSxLQUFQLEdBQWdCLFdBQWhCLENBQThCLFdBQTlCLENBQTRDcEQsUUFBUW9ELElBQVIsQ0FBcEQsRUFBcUUsSUFBNUUsQ0FDRCxDQUVELFFBQVNHLFlBQVQsQ0FBcUJoQixJQUFyQixDQUEyQixDQUN6QixHQUFJaUIsT0FBUSxDQUFDLEVBQUd6QixjQUFjMEIsV0FBbEIsRUFBK0JsQixJQUEvQixDQUFaLENBQ0EsR0FBSW1CLE1BQU8sQ0FBQyxFQUFHN0MsVUFBVSxTQUFWLENBQUosRUFBMEJqQixPQUFPOEQsSUFBUCxDQUFZRixLQUFaLENBQTFCLENBQThDLFVBQTlDLENBQVgsQ0FDQSxNQUFPRSxNQUFLVixHQUFMLENBQVMsU0FBVVcsR0FBVixDQUFlLENBQzdCLE1BQU9ULFFBQU9TLEdBQVAsRUFBYyxHQUFkLENBQW9CVCxPQUFPQyxXQUFXSyxNQUFNRyxHQUFOLENBQVgsQ0FBUCxDQUEzQixDQUNELENBRk0sRUFFSmYsSUFGSSxDQUVDLEdBRkQsQ0FBUCxDQUdELENBRUQsUUFBU2dCLGVBQVQsQ0FBd0JDLFlBQXhCLENBQXNDQyxZQUF0QyxDQUFvRCxDQUNsRCxNQUFPRCxjQUFhRSxNQUFiLENBQXNCLEtBQU9iLE9BQU9XLGFBQWFiLEdBQWIsQ0FBaUIsU0FBVUMsQ0FBVixDQUFhLENBQ3ZFLE1BQU96QyxRQUFPc0QsWUFBUCxDQUFxQmIsQ0FBckIsQ0FBUCxDQUNELENBRjBDLEVBRXhDTCxJQUZ3QyxDQUVuQyxJQUZtQyxDQUFQLENBQVAsQ0FFWixJQUZWLENBRWlCLEVBRnhCLENBR0QsQ0FFRCxRQUFTbkMsVUFBVCxDQUFtQjhCLElBQW5CLENBQXlCLENBQ3ZCLEdBQUl1QixjQUFlRSxVQUFVRCxNQUFWLENBQW1CLENBQW5CLEVBQXdCQyxVQUFVLENBQVYsSUFBaUJDLFNBQXpDLENBQXFERCxVQUFVLENBQVYsQ0FBckQsQ0FBb0UsQ0FBdkYsQ0FDQSxHQUFJRSxTQUFVRixVQUFVRCxNQUFWLENBQW1CLENBQW5CLEVBQXdCQyxVQUFVLENBQVYsSUFBaUJDLFNBQXpDLENBQXFERCxVQUFVLENBQVYsQ0FBckQsQ0FBb0UsRUFBbEYsQ0FFQSxHQUFJLE1BQU96QixLQUFQLEdBQWdCLFFBQWhCLEVBQTRCLE1BQU9BLEtBQVAsR0FBZ0IsUUFBaEQsQ0FBMEQsTUFBTyxDQUFDLEVBQUd2QixTQUFTLFNBQVQsQ0FBSixFQUF5QnVCLElBQXpCLENBQVAsQ0FDMUQsR0FBSSxDQUFDQSxJQUFMLENBQVcsTUFBTyxFQUFQLENBRVgsR0FBSXNCLGNBQWUsQ0FBQyxFQUFHM0MsVUFBVSxTQUFWLENBQUosRUFBMEIsQ0FBQyxFQUFHYSxjQUFjb0MsY0FBbEIsRUFBa0M1QixJQUFsQyxFQUF3Q1MsR0FBeEMsQ0FBNEMsU0FBVU4sQ0FBVixDQUFhLENBQ3BHLE1BQU9qQyxXQUFVaUMsQ0FBVixDQUFhb0IsWUFBYixDQUEyQkksT0FBM0IsQ0FBUCxDQUNELENBRjRDLENBQTFCLENBQW5CLENBR0EsR0FBSTFCLE1BQU9sQyxTQUFTaUMsSUFBVCxDQUFYLENBRUEsR0FBSWlCLE9BQVFVLFFBQVFFLFdBQVIsQ0FBc0IsRUFBdEIsQ0FBMkJiLFlBQVloQixJQUFaLENBQXZDLENBQ0EsR0FBSThCLGFBQWNiLE1BQVEsR0FBUixDQUFjLEVBQWhDLENBQ0EsR0FBSWMsWUFBYVQsYUFBYUUsTUFBYixDQUFzQixHQUF0QixDQUE0QixHQUE3QyxDQUNBLEdBQUlRLGtCQUFtQlgsZUFBZUMsWUFBZixDQUE2QkMsWUFBN0IsQ0FBdkIsQ0FDQSxHQUFJVSxXQUFZWCxhQUFhRSxNQUFiLENBQXNCLEtBQU9iLE9BQU9WLElBQVAsQ0FBUCxDQUFzQixHQUE1QyxDQUFrRCxJQUFsRSxDQUNBLE1BQU8sSUFBTVUsT0FBT1YsSUFBUCxDQUFOLENBQXFCNkIsV0FBckIsQ0FBbUNuQixPQUFPTSxLQUFQLENBQW5DLENBQW1EYyxVQUFuRCxDQUFnRXBCLE9BQU9xQixnQkFBUCxDQUFoRSxDQUEyRkMsU0FBbEcsQ0FDRCxDQUVELFFBQVM5RCxXQUFULENBQW9CK0QsS0FBcEIsQ0FBMkIsQ0FDekIsR0FBSVAsU0FBVUYsVUFBVUQsTUFBVixDQUFtQixDQUFuQixFQUF3QkMsVUFBVSxDQUFWLElBQWlCQyxTQUF6QyxDQUFxREQsVUFBVSxDQUFWLENBQXJELENBQW9FLEVBQWxGLENBRUEsTUFBT1MsT0FBTXpCLEdBQU4sQ0FBVSxTQUFVVCxJQUFWLENBQWdCLENBQy9CLE1BQU85QixXQUFVOEIsSUFBVixDQUFnQjBCLFNBQWhCLENBQTJCQyxPQUEzQixDQUFQLENBQ0QsQ0FGTSxFQUVKdEIsSUFGSSxDQUVDLFFBRkQsQ0FBUCxDQUdEIiwiZmlsZSI6IkRlYnVnLmpzIiwic291cmNlc0NvbnRlbnQiOlsiT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG5leHBvcnRzLnR5cGVOYW1lID0gdHlwZU5hbWU7XG5leHBvcnRzLnNwYWNlcyA9IHNwYWNlcztcbmV4cG9ydHMuaW5kZW50ID0gaW5kZW50O1xuZXhwb3J0cy5kZWJ1Z05vZGUgPSBkZWJ1Z05vZGU7XG5leHBvcnRzLmRlYnVnTm9kZXMgPSBkZWJ1Z05vZGVzO1xuXG52YXIgX3dpdGhvdXQgPSByZXF1aXJlKCdsb2Rhc2gvd2l0aG91dCcpO1xuXG52YXIgX3dpdGhvdXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2l0aG91dCk7XG5cbnZhciBfZXNjYXBlID0gcmVxdWlyZSgnbG9kYXNoL2VzY2FwZScpO1xuXG52YXIgX2VzY2FwZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lc2NhcGUpO1xuXG52YXIgX2NvbXBhY3QgPSByZXF1aXJlKCdsb2Rhc2gvY29tcGFjdCcpO1xuXG52YXIgX2NvbXBhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tcGFjdCk7XG5cbnZhciBfZnVuY3Rpb25Qcm90b3R5cGUgPSByZXF1aXJlKCdmdW5jdGlvbi5wcm90b3R5cGUubmFtZScpO1xuXG52YXIgX2Z1bmN0aW9uUHJvdG90eXBlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Z1bmN0aW9uUHJvdG90eXBlKTtcblxudmFyIF9pc1N0cmluZyA9IHJlcXVpcmUoJ2lzLXN0cmluZycpO1xuXG52YXIgX2lzU3RyaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2lzU3RyaW5nKTtcblxudmFyIF9pc051bWJlck9iamVjdCA9IHJlcXVpcmUoJ2lzLW51bWJlci1vYmplY3QnKTtcblxudmFyIF9pc051bWJlck9iamVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pc051bWJlck9iamVjdCk7XG5cbnZhciBfaXNDYWxsYWJsZSA9IHJlcXVpcmUoJ2lzLWNhbGxhYmxlJyk7XG5cbnZhciBfaXNDYWxsYWJsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pc0NhbGxhYmxlKTtcblxudmFyIF9pc0Jvb2xlYW5PYmplY3QgPSByZXF1aXJlKCdpcy1ib29sZWFuLW9iamVjdCcpO1xuXG52YXIgX2lzQm9vbGVhbk9iamVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pc0Jvb2xlYW5PYmplY3QpO1xuXG52YXIgX29iamVjdEluc3BlY3QgPSByZXF1aXJlKCdvYmplY3QtaW5zcGVjdCcpO1xuXG52YXIgX29iamVjdEluc3BlY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0SW5zcGVjdCk7XG5cbnZhciBfUlNUVHJhdmVyc2FsID0gcmVxdWlyZSgnLi9SU1RUcmF2ZXJzYWwnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG52YXIgYm9vbGVhblZhbHVlID0gRnVuY3Rpb24uYmluZC5jYWxsKEZ1bmN0aW9uLmNhbGwsIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YpO1xuXG5mdW5jdGlvbiB0eXBlTmFtZShub2RlKSB7XG4gIHJldHVybiB0eXBlb2Ygbm9kZS50eXBlID09PSAnZnVuY3Rpb24nID8gbm9kZS50eXBlLmRpc3BsYXlOYW1lIHx8ICgwLCBfZnVuY3Rpb25Qcm90b3R5cGUyWydkZWZhdWx0J10pKG5vZGUudHlwZSkgfHwgJ0NvbXBvbmVudCcgOiBub2RlLnR5cGU7XG59XG5cbmZ1bmN0aW9uIHNwYWNlcyhuKSB7XG4gIHJldHVybiBBcnJheShuICsgMSkuam9pbignICcpO1xufVxuXG5mdW5jdGlvbiBpbmRlbnQoZGVwdGgsIHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24gKHgpIHtcbiAgICByZXR1cm4gJycgKyBTdHJpbmcoc3BhY2VzKGRlcHRoKSkgKyBTdHJpbmcoeCk7XG4gIH0pLmpvaW4oJ1xcbicpO1xufVxuXG5mdW5jdGlvbiBwcm9wU3RyaW5nKHByb3ApIHtcbiAgaWYgKCgwLCBfaXNTdHJpbmcyWydkZWZhdWx0J10pKHByb3ApKSB7XG4gICAgcmV0dXJuICgwLCBfb2JqZWN0SW5zcGVjdDJbJ2RlZmF1bHQnXSkoU3RyaW5nKHByb3ApLCB7IHF1b3RlU3R5bGU6ICdkb3VibGUnIH0pO1xuICB9XG4gIGlmICgoMCwgX2lzTnVtYmVyT2JqZWN0MlsnZGVmYXVsdCddKShwcm9wKSkge1xuICAgIHJldHVybiAneycgKyBTdHJpbmcoKDAsIF9vYmplY3RJbnNwZWN0MlsnZGVmYXVsdCddKShOdW1iZXIocHJvcCkpKSArICd9JztcbiAgfVxuICBpZiAoKDAsIF9pc0Jvb2xlYW5PYmplY3QyWydkZWZhdWx0J10pKHByb3ApKSB7XG4gICAgcmV0dXJuICd7JyArIFN0cmluZygoMCwgX29iamVjdEluc3BlY3QyWydkZWZhdWx0J10pKGJvb2xlYW5WYWx1ZShwcm9wKSkpICsgJ30nO1xuICB9XG4gIGlmICgoMCwgX2lzQ2FsbGFibGUyWydkZWZhdWx0J10pKHByb3ApKSB7XG4gICAgcmV0dXJuICd7JyArIFN0cmluZygoMCwgX29iamVjdEluc3BlY3QyWydkZWZhdWx0J10pKHByb3ApKSArICd9JztcbiAgfVxuICBpZiAoKHR5cGVvZiBwcm9wID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihwcm9wKSkgPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuICd7ey4uLn19JztcbiAgfVxuICByZXR1cm4gJ3tbJyArICh0eXBlb2YgcHJvcCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YocHJvcCkpICsgJ119Jztcbn1cblxuZnVuY3Rpb24gcHJvcHNTdHJpbmcobm9kZSkge1xuICB2YXIgcHJvcHMgPSAoMCwgX1JTVFRyYXZlcnNhbC5wcm9wc09mTm9kZSkobm9kZSk7XG4gIHZhciBrZXlzID0gKDAsIF93aXRob3V0MlsnZGVmYXVsdCddKShPYmplY3Qua2V5cyhwcm9wcyksICdjaGlsZHJlbicpO1xuICByZXR1cm4ga2V5cy5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiBTdHJpbmcoa2V5KSArICc9JyArIFN0cmluZyhwcm9wU3RyaW5nKHByb3BzW2tleV0pKTtcbiAgfSkuam9pbignICcpO1xufVxuXG5mdW5jdGlvbiBpbmRlbnRDaGlsZHJlbihjaGlsZHJlblN0cnMsIGluZGVudExlbmd0aCkge1xuICByZXR1cm4gY2hpbGRyZW5TdHJzLmxlbmd0aCA/ICdcXG4nICsgU3RyaW5nKGNoaWxkcmVuU3Rycy5tYXAoZnVuY3Rpb24gKHgpIHtcbiAgICByZXR1cm4gaW5kZW50KGluZGVudExlbmd0aCwgeCk7XG4gIH0pLmpvaW4oJ1xcbicpKSArICdcXG4nIDogJyc7XG59XG5cbmZ1bmN0aW9uIGRlYnVnTm9kZShub2RlKSB7XG4gIHZhciBpbmRlbnRMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDI7XG4gIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcblxuICBpZiAodHlwZW9mIG5vZGUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBub2RlID09PSAnbnVtYmVyJykgcmV0dXJuICgwLCBfZXNjYXBlMlsnZGVmYXVsdCddKShub2RlKTtcbiAgaWYgKCFub2RlKSByZXR1cm4gJyc7XG5cbiAgdmFyIGNoaWxkcmVuU3RycyA9ICgwLCBfY29tcGFjdDJbJ2RlZmF1bHQnXSkoKDAsIF9SU1RUcmF2ZXJzYWwuY2hpbGRyZW5PZk5vZGUpKG5vZGUpLm1hcChmdW5jdGlvbiAobikge1xuICAgIHJldHVybiBkZWJ1Z05vZGUobiwgaW5kZW50TGVuZ3RoLCBvcHRpb25zKTtcbiAgfSkpO1xuICB2YXIgdHlwZSA9IHR5cGVOYW1lKG5vZGUpO1xuXG4gIHZhciBwcm9wcyA9IG9wdGlvbnMuaWdub3JlUHJvcHMgPyAnJyA6IHByb3BzU3RyaW5nKG5vZGUpO1xuICB2YXIgYmVmb3JlUHJvcHMgPSBwcm9wcyA/ICcgJyA6ICcnO1xuICB2YXIgYWZ0ZXJQcm9wcyA9IGNoaWxkcmVuU3Rycy5sZW5ndGggPyAnPicgOiAnICc7XG4gIHZhciBjaGlsZHJlbkluZGVudGVkID0gaW5kZW50Q2hpbGRyZW4oY2hpbGRyZW5TdHJzLCBpbmRlbnRMZW5ndGgpO1xuICB2YXIgbm9kZUNsb3NlID0gY2hpbGRyZW5TdHJzLmxlbmd0aCA/ICc8LycgKyBTdHJpbmcodHlwZSkgKyAnPicgOiAnLz4nO1xuICByZXR1cm4gJzwnICsgU3RyaW5nKHR5cGUpICsgYmVmb3JlUHJvcHMgKyBTdHJpbmcocHJvcHMpICsgYWZ0ZXJQcm9wcyArIFN0cmluZyhjaGlsZHJlbkluZGVudGVkKSArIG5vZGVDbG9zZTtcbn1cblxuZnVuY3Rpb24gZGVidWdOb2Rlcyhub2Rlcykge1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgcmV0dXJuIG5vZGVzLm1hcChmdW5jdGlvbiAobm9kZSkge1xuICAgIHJldHVybiBkZWJ1Z05vZGUobm9kZSwgdW5kZWZpbmVkLCBvcHRpb25zKTtcbiAgfSkuam9pbignXFxuXFxuXFxuJyk7XG59Il19