26c332e6343b70122591da7daf8564eb
'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var ColorPropType=require('ColorPropType');var EdgeInsetsPropType=require('EdgeInsetsPropType');var NativeMethodsMixin=require('NativeMethodsMixin');var Platform=require('Platform');var React=require('React');var PropTypes=require('prop-types');var ReactNativeViewAttributes=require('ReactNativeViewAttributes');var StyleSheetPropType=require('StyleSheetPropType');var TextStylePropTypes=require('TextStylePropTypes');var Touchable=require('Touchable');var createReactClass=require('create-react-class');var createReactNativeComponentClass=require('createReactNativeComponentClass');var mergeFast=require('mergeFast');var processColor=require('processColor');var stylePropType=StyleSheetPropType(TextStylePropTypes);var viewConfig={validAttributes:mergeFast(ReactNativeViewAttributes.UIView,{isHighlighted:true,numberOfLines:true,ellipsizeMode:true,allowFontScaling:true,disabled:true,selectable:true,selectionColor:true,adjustsFontSizeToFit:true,minimumFontScale:true,textBreakStrategy:true}),uiViewClassName:'RCTText'};var Text=createReactClass({displayName:'Text',propTypes:{ellipsizeMode:PropTypes.oneOf(['head','middle','tail','clip']),numberOfLines:PropTypes.number,textBreakStrategy:PropTypes.oneOf(['simple','highQuality','balanced']),onLayout:PropTypes.func,onPress:PropTypes.func,onLongPress:PropTypes.func,pressRetentionOffset:EdgeInsetsPropType,selectable:PropTypes.bool,selectionColor:ColorPropType,suppressHighlighting:PropTypes.bool,style:stylePropType,testID:PropTypes.string,nativeID:PropTypes.string,allowFontScaling:PropTypes.bool,accessible:PropTypes.bool,adjustsFontSizeToFit:PropTypes.bool,minimumFontScale:PropTypes.number,disabled:PropTypes.bool},getDefaultProps:function getDefaultProps(){return{accessible:true,allowFontScaling:true,ellipsizeMode:'tail'};},getInitialState:function getInitialState(){return mergeFast(Touchable.Mixin.touchableGetInitialState(),{isHighlighted:false});},mixins:[NativeMethodsMixin],viewConfig:viewConfig,getChildContext:function getChildContext(){return{isInAParentText:true};},childContextTypes:{isInAParentText:PropTypes.bool},contextTypes:{isInAParentText:PropTypes.bool},_handlers:null,_hasPressHandler:function _hasPressHandler(){return!!this.props.onPress||!!this.props.onLongPress;},touchableHandleActivePressIn:null,touchableHandleActivePressOut:null,touchableHandlePress:null,touchableHandleLongPress:null,touchableGetPressRectOffset:null,render:function render(){var _this=this;var newProps=this.props;if(this.props.onStartShouldSetResponder||this._hasPressHandler()){if(!this._handlers){this._handlers={onStartShouldSetResponder:function onStartShouldSetResponder(){var shouldSetFromProps=_this.props.onStartShouldSetResponder&&_this.props.onStartShouldSetResponder();var setResponder=shouldSetFromProps||_this._hasPressHandler();if(setResponder&&!_this.touchableHandleActivePressIn){for(var key in Touchable.Mixin){if(typeof Touchable.Mixin[key]==='function'){_this[key]=Touchable.Mixin[key].bind(_this);}}_this.touchableHandleActivePressIn=function(){if(_this.props.suppressHighlighting||!_this._hasPressHandler()){return;}_this.setState({isHighlighted:true});};_this.touchableHandleActivePressOut=function(){if(_this.props.suppressHighlighting||!_this._hasPressHandler()){return;}_this.setState({isHighlighted:false});};_this.touchableHandlePress=function(e){_this.props.onPress&&_this.props.onPress(e);};_this.touchableHandleLongPress=function(e){_this.props.onLongPress&&_this.props.onLongPress(e);};_this.touchableGetPressRectOffset=function(){return this.props.pressRetentionOffset||PRESS_RECT_OFFSET;};}return setResponder;},onResponderGrant:function(e,dispatchID){this.touchableHandleResponderGrant(e,dispatchID);this.props.onResponderGrant&&this.props.onResponderGrant.apply(this,arguments);}.bind(this),onResponderMove:function(e){this.touchableHandleResponderMove(e);this.props.onResponderMove&&this.props.onResponderMove.apply(this,arguments);}.bind(this),onResponderRelease:function(e){this.touchableHandleResponderRelease(e);this.props.onResponderRelease&&this.props.onResponderRelease.apply(this,arguments);}.bind(this),onResponderTerminate:function(e){this.touchableHandleResponderTerminate(e);this.props.onResponderTerminate&&this.props.onResponderTerminate.apply(this,arguments);}.bind(this),onResponderTerminationRequest:function(){var allowTermination=this.touchableHandleResponderTerminationRequest();if(allowTermination&&this.props.onResponderTerminationRequest){allowTermination=this.props.onResponderTerminationRequest.apply(this,arguments);}return allowTermination;}.bind(this)};}newProps=_extends({},this.props,this._handlers,{isHighlighted:this.state.isHighlighted});}if(newProps.selectionColor!=null){newProps=_extends({},newProps,{selectionColor:processColor(newProps.selectionColor)});}if(Touchable.TOUCH_TARGET_DEBUG&&newProps.onPress){newProps=_extends({},newProps,{style:[this.props.style,{color:'magenta'}]});}if(this.context.isInAParentText){return React.createElement(RCTVirtualText,newProps);}else{return React.createElement(RCTText,newProps);}}});var PRESS_RECT_OFFSET={top:20,left:20,right:20,bottom:30};var RCTText=createReactNativeComponentClass(viewConfig.uiViewClassName,function(){return viewConfig;});var RCTVirtualText=RCTText;if(Platform.OS==='android'){RCTVirtualText=createReactNativeComponentClass('RCTVirtualText',function(){return{validAttributes:mergeFast(ReactNativeViewAttributes.UIView,{isHighlighted:true}),uiViewClassName:'RCTVirtualText'};});}module.exports=Text;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRleHQuanMiXSwibmFtZXMiOlsiQ29sb3JQcm9wVHlwZSIsInJlcXVpcmUiLCJFZGdlSW5zZXRzUHJvcFR5cGUiLCJOYXRpdmVNZXRob2RzTWl4aW4iLCJQbGF0Zm9ybSIsIlJlYWN0IiwiUHJvcFR5cGVzIiwiUmVhY3ROYXRpdmVWaWV3QXR0cmlidXRlcyIsIlN0eWxlU2hlZXRQcm9wVHlwZSIsIlRleHRTdHlsZVByb3BUeXBlcyIsIlRvdWNoYWJsZSIsImNyZWF0ZVJlYWN0Q2xhc3MiLCJjcmVhdGVSZWFjdE5hdGl2ZUNvbXBvbmVudENsYXNzIiwibWVyZ2VGYXN0IiwicHJvY2Vzc0NvbG9yIiwic3R5bGVQcm9wVHlwZSIsInZpZXdDb25maWciLCJ2YWxpZEF0dHJpYnV0ZXMiLCJVSVZpZXciLCJpc0hpZ2hsaWdodGVkIiwibnVtYmVyT2ZMaW5lcyIsImVsbGlwc2l6ZU1vZGUiLCJhbGxvd0ZvbnRTY2FsaW5nIiwiZGlzYWJsZWQiLCJzZWxlY3RhYmxlIiwic2VsZWN0aW9uQ29sb3IiLCJhZGp1c3RzRm9udFNpemVUb0ZpdCIsIm1pbmltdW1Gb250U2NhbGUiLCJ0ZXh0QnJlYWtTdHJhdGVneSIsInVpVmlld0NsYXNzTmFtZSIsIlRleHQiLCJkaXNwbGF5TmFtZSIsInByb3BUeXBlcyIsIm9uZU9mIiwibnVtYmVyIiwib25MYXlvdXQiLCJmdW5jIiwib25QcmVzcyIsIm9uTG9uZ1ByZXNzIiwicHJlc3NSZXRlbnRpb25PZmZzZXQiLCJib29sIiwic3VwcHJlc3NIaWdobGlnaHRpbmciLCJzdHlsZSIsInRlc3RJRCIsInN0cmluZyIsIm5hdGl2ZUlEIiwiYWNjZXNzaWJsZSIsImdldERlZmF1bHRQcm9wcyIsImdldEluaXRpYWxTdGF0ZSIsIk1peGluIiwidG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlIiwibWl4aW5zIiwiZ2V0Q2hpbGRDb250ZXh0IiwiaXNJbkFQYXJlbnRUZXh0IiwiY2hpbGRDb250ZXh0VHlwZXMiLCJjb250ZXh0VHlwZXMiLCJfaGFuZGxlcnMiLCJfaGFzUHJlc3NIYW5kbGVyIiwicHJvcHMiLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luIiwidG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQiLCJ0b3VjaGFibGVIYW5kbGVQcmVzcyIsInRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzcyIsInRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCIsInJlbmRlciIsIm5ld1Byb3BzIiwib25TdGFydFNob3VsZFNldFJlc3BvbmRlciIsInNob3VsZFNldEZyb21Qcm9wcyIsInNldFJlc3BvbmRlciIsImtleSIsImJpbmQiLCJzZXRTdGF0ZSIsImUiLCJQUkVTU19SRUNUX09GRlNFVCIsIm9uUmVzcG9uZGVyR3JhbnQiLCJkaXNwYXRjaElEIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnQiLCJhcHBseSIsImFyZ3VtZW50cyIsIm9uUmVzcG9uZGVyTW92ZSIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlck1vdmUiLCJvblJlc3BvbmRlclJlbGVhc2UiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlIiwib25SZXNwb25kZXJUZXJtaW5hdGUiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGUiLCJvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCIsImFsbG93VGVybWluYXRpb24iLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJzdGF0ZSIsIlRPVUNIX1RBUkdFVF9ERUJVRyIsImNvbG9yIiwiY29udGV4dCIsInRvcCIsImxlZnQiLCJyaWdodCIsImJvdHRvbSIsIlJDVFRleHQiLCJSQ1RWaXJ0dWFsVGV4dCIsIk9TIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBV0EsYSxnT0FFQSxHQUFNQSxlQUFnQkMsT0FBaEIsaUJBQU4sQ0FDQSxHQUFNQyxvQkFBcUJELE9BQXJCLHNCQUFOLENBQ0EsR0FBTUUsb0JBQXFCRixPQUFyQixzQkFBTixDQUNBLEdB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RCxTQUFTeEMsY0FBdEIsQ0FGbEIsR0FJRCxDQUNELEdBQUlmLFVBQVUrRSxrQkFBVixFQUFnQ3hCLFNBQVM1QixPQUE3QyxDQUFzRCxDQUNwRDRCLHFCQUNLQSxRQURMLEVBRUV2QixNQUFPLENBQUMsS0FBS2dCLEtBQUwsQ0FBV2hCLEtBQVosQ0FBbUIsQ0FBQ2dELE1BQU8sU0FBUixDQUFuQixDQUZULEdBSUQsQ0FDRCxHQUFJLEtBQUtDLE9BQUwsQ0FBYXRDLGVBQWpCLENBQWtDLENBQ2hDLE1BQU8scUJBQUMsY0FBRCxDQUFvQlksUUFBcEIsQ0FBUCxDQUNELENBRkQsSUFFTyxDQUNMLE1BQU8scUJBQUMsT0FBRCxDQUFhQSxRQUFiLENBQVAsQ0FDRCxDQUNGLENBcFEyQixDQUFqQixDQUFiLENBOFFBLEdBQUlRLG1CQUFvQixDQUFDbUIsSUFBSyxFQUFOLENBQVVDLEtBQU0sRUFBaEIsQ0FBb0JDLE1BQU8sRUFBM0IsQ0FBK0JDLE9BQVEsRUFBdkMsQ0FBeEIsQ0FFQSxHQUFJQyxTQUFVcEYsZ0NBQ1pJLFdBQVdhLGVBREMsQ0FFWixpQkFBTWIsV0FBTixFQUZZLENBQWQsQ0FJQSxHQUFJaUYsZ0JBQWlCRCxPQUFyQixDQUVBLEdBQUk1RixTQUFTOEYsRUFBVCxHQUFnQixTQUFwQixDQUErQixDQUM3QkQsZUFBaUJyRixnQ0FBZ0MsZ0JBQWhDLENBQWtELGlCQUFPLENBQ3hFSyxnQkFBaUJKLFVBQVVOLDBCQUEwQlcsTUFBcEMsQ0FBNEMsQ0FDM0RDLGNBQWUsSUFENEMsQ0FBNUMsQ0FEdUQsQ0FJeEVVLGdCQUFpQixnQkFKdUQsQ0FBUCxFQUFsRCxDQUFqQixDQU1ELENBRURzRSxPQUFPQyxPQUFQLENBQWlCdEUsSUFBakIiLCJmaWxlIjoiVGV4dC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgVGV4dFxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBDb2xvclByb3BUeXBlID0gcmVxdWlyZSgnQ29sb3JQcm9wVHlwZScpO1xuY29uc3QgRWRnZUluc2V0c1Byb3BUeXBlID0gcmVxdWlyZSgnRWRnZUluc2V0c1Byb3BUeXBlJyk7XG5jb25zdCBOYXRpdmVNZXRob2RzTWl4aW4gPSByZXF1aXJlKCdOYXRpdmVNZXRob2RzTWl4aW4nKTtcbmNvbnN0IFBsYXRmb3JtID0gcmVxdWlyZSgnUGxhdGZvcm0nKTtcbmNvbnN0IFJlYWN0ID0gcmVxdWlyZSgnUmVhY3QnKTtcbmNvbnN0IFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcbmNvbnN0IFJlYWN0TmF0aXZlVmlld0F0dHJpYnV0ZXMgPSByZXF1aXJlKCdSZWFjdE5hdGl2ZVZpZXdBdHRyaWJ1dGVzJyk7XG5jb25zdCBTdHlsZVNoZWV0UHJvcFR5cGUgPSByZXF1aXJlKCdTdHlsZVNoZWV0UHJvcFR5cGUnKTtcbmNvbnN0IFRleHRTdHlsZVByb3BUeXBlcyA9IHJlcXVpcmUoJ1RleHRTdHlsZVByb3BUeXBlcycpO1xuY29uc3QgVG91Y2hhYmxlID0gcmVxdWlyZSgnVG91Y2hhYmxlJyk7XG5cbmNvbnN0IGNyZWF0ZVJlYWN0Q2xhc3MgPSByZXF1aXJlKCdjcmVhdGUtcmVhY3QtY2xhc3MnKTtcbmNvbnN0IGNyZWF0ZVJlYWN0TmF0aXZlQ29tcG9uZW50Q2xhc3MgPSByZXF1aXJlKCdjcmVhdGVSZWFjdE5hdGl2ZUNvbXBvbmVudENsYXNzJyk7XG5jb25zdCBtZXJnZUZhc3QgPSByZXF1aXJlKCdtZXJnZUZhc3QnKTtcbmNvbnN0IHByb2Nlc3NDb2xvciA9IHJlcXVpcmUoJ3Byb2Nlc3NDb2xvcicpO1xuXG5jb25zdCBzdHlsZVByb3BUeXBlID0gU3R5bGVTaGVldFByb3BUeXBlKFRleHRTdHlsZVByb3BUeXBlcyk7XG5cbmNvbnN0IHZpZXdDb25maWcgPSB7XG4gIHZhbGlkQXR0cmlidXRlczogbWVyZ2VGYXN0KFJlYWN0TmF0aXZlVmlld0F0dHJpYnV0ZXMuVUlWaWV3LCB7XG4gICAgaXNIaWdobGlnaHRlZDogdHJ1ZSxcbiAgICBudW1iZXJPZkxpbmVzOiB0cnVlLFxuICAgIGVsbGlwc2l6ZU1vZGU6IHRydWUsXG4gICAgYWxsb3dGb250U2NhbGluZzogdHJ1ZSxcbiAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICBzZWxlY3RhYmxlOiB0cnVlLFxuICAgIHNlbGVjdGlvbkNvbG9yOiB0cnVlLFxuICAgIGFkanVzdHNGb250U2l6ZVRvRml0OiB0cnVlLFxuICAgIG1pbmltdW1Gb250U2NhbGU6IHRydWUsXG4gICAgdGV4dEJyZWFrU3RyYXRlZ3k6IHRydWUsXG4gIH0pLFxuICB1aVZpZXdDbGFzc05hbWU6ICdSQ1RUZXh0Jyxcbn07XG5cbi8qKlxuICogQSBSZWFjdCBjb21wb25lbnQgZm9yIGRpc3BsYXlpbmcgdGV4dC5cbiAqXG4gKiBgVGV4dGAgc3VwcG9ydHMgbmVzdGluZywgc3R5bGluZywgYW5kIHRvdWNoIGhhbmRsaW5nLlxuICpcbiAqIEluIHRoZSBmb2xsb3dpbmcgZXhhbXBsZSwgdGhlIG5lc3RlZCB0aXRsZSBhbmQgYm9keSB0ZXh0IHdpbGwgaW5oZXJpdCB0aGVcbiAqIGBmb250RmFtaWx5YCBmcm9tIGBzdHlsZXMuYmFzZVRleHRgLCBidXQgdGhlIHRpdGxlIHByb3ZpZGVzIGl0cyBvd25cbiAqIGFkZGl0aW9uYWwgc3R5bGVzLiAgVGhlIHRpdGxlIGFuZCBib2R5IHdpbGwgc3RhY2sgb24gdG9wIG9mIGVhY2ggb3RoZXIgb25cbiAqIGFjY291bnQgb2YgdGhlIGxpdGVyYWwgbmV3bGluZXM6XG4gKlxuICogYGBgUmVhY3ROYXRpdmVXZWJQbGF5ZXJcbiAqIGltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG4gKiBpbXBvcnQgeyBBcHBSZWdpc3RyeSwgVGV4dCwgU3R5bGVTaGVldCB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGV4dEluQU5lc3QgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICogICAgIHN1cGVyKHByb3BzKTtcbiAqICAgICB0aGlzLnN0YXRlID0ge1xuICogICAgICAgdGl0bGVUZXh0OiBcIkJpcmQncyBOZXN0XCIsXG4gKiAgICAgICBib2R5VGV4dDogJ1RoaXMgaXMgbm90IHJlYWxseSBhIGJpcmQgbmVzdC4nXG4gKiAgICAgfTtcbiAqICAgfVxuICpcbiAqICAgcmVuZGVyKCkge1xuICogICAgIHJldHVybiAoXG4gKiAgICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLmJhc2VUZXh0fT5cbiAqICAgICAgICAgPFRleHQgc3R5bGU9e3N0eWxlcy50aXRsZVRleHR9IG9uUHJlc3M9e3RoaXMub25QcmVzc1RpdGxlfT5cbiAqICAgICAgICAgICB7dGhpcy5zdGF0ZS50aXRsZVRleHR9eydcXG4nfXsnXFxuJ31cbiAqICAgICAgICAgPC9UZXh0PlxuICogICAgICAgICA8VGV4dCBudW1iZXJPZkxpbmVzPXs1fT5cbiAqICAgICAgICAgICB7dGhpcy5zdGF0ZS5ib2R5VGV4dH1cbiAqICAgICAgICAgPC9UZXh0PlxuICogICAgICAgPC9UZXh0PlxuICogICAgICk7XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiBjb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gKiAgIGJhc2VUZXh0OiB7XG4gKiAgICAgZm9udEZhbWlseTogJ0NvY2hpbicsXG4gKiAgIH0sXG4gKiAgIHRpdGxlVGV4dDoge1xuICogICAgIGZvbnRTaXplOiAyMCxcbiAqICAgICBmb250V2VpZ2h0OiAnYm9sZCcsXG4gKiAgIH0sXG4gKiB9KTtcbiAqXG4gKiAvLyBza2lwIHRoaXMgbGluZSBpZiB1c2luZyBDcmVhdGUgUmVhY3QgTmF0aXZlIEFwcFxuICogQXBwUmVnaXN0cnkucmVnaXN0ZXJDb21wb25lbnQoJ1RleHRJbkFOZXN0JywgKCkgPT4gVGV4dEluQU5lc3QpO1xuICogYGBgXG4gKlxuICogIyMgTmVzdGVkIHRleHRcbiAqXG4gKiBCb3RoIGlPUyBhbmQgQW5kcm9pZCBhbGxvdyB5b3UgdG8gZGlzcGxheSBmb3JtYXR0ZWQgdGV4dCBieSBhbm5vdGF0aW5nXG4gKiByYW5nZXMgb2YgYSBzdHJpbmcgd2l0aCBzcGVjaWZpYyBmb3JtYXR0aW5nIGxpa2UgYm9sZCBvciBjb2xvcmVkIHRleHRcbiAqIChgTlNBdHRyaWJ1dGVkU3RyaW5nYCBvbiBpT1MsIGBTcGFubmFibGVTdHJpbmdgIG9uIEFuZHJvaWQpLiBJbiBwcmFjdGljZSxcbiAqIHRoaXMgaXMgdmVyeSB0ZWRpb3VzLiBGb3IgUmVhY3QgTmF0aXZlLCB3ZSBkZWNpZGVkIHRvIHVzZSB3ZWIgcGFyYWRpZ20gZm9yXG4gKiB0aGlzIHdoZXJlIHlvdSBjYW4gbmVzdCB0ZXh0IHRvIGFjaGlldmUgdGhlIHNhbWUgZWZmZWN0LlxuICpcbiAqXG4gKiBgYGBSZWFjdE5hdGl2ZVdlYlBsYXllclxuICogaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbiAqIGltcG9ydCB7IEFwcFJlZ2lzdHJ5LCBUZXh0IH0gZnJvbSAncmVhY3QtbmF0aXZlJztcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBjbGFzcyBCb2xkQW5kQmVhdXRpZnVsIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAqICAgcmVuZGVyKCkge1xuICogICAgIHJldHVybiAoXG4gKiAgICAgICA8VGV4dCBzdHlsZT17e2ZvbnRXZWlnaHQ6ICdib2xkJ319PlxuICogICAgICAgICBJIGFtIGJvbGRcbiAqICAgICAgICAgPFRleHQgc3R5bGU9e3tjb2xvcjogJ3JlZCd9fT5cbiAqICAgICAgICAgICBhbmQgcmVkXG4gKiAgICAgICAgIDwvVGV4dD5cbiAqICAgICAgIDwvVGV4dD5cbiAqICAgICApO1xuICogICB9XG4gKiB9XG4gKlxuICogLy8gc2tpcCB0aGlzIGxpbmUgaWYgdXNpbmcgQ3JlYXRlIFJlYWN0IE5hdGl2ZSBBcHBcbiAqIEFwcFJlZ2lzdHJ5LnJlZ2lzdGVyQ29tcG9uZW50KCdBd2Vzb21lUHJvamVjdCcsICgpID0+IEJvbGRBbmRCZWF1dGlmdWwpO1xuICogYGBgXG4gKlxuICogQmVoaW5kIHRoZSBzY2VuZXMsIFJlYWN0IE5hdGl2ZSBjb252ZXJ0cyB0aGlzIHRvIGEgZmxhdCBgTlNBdHRyaWJ1dGVkU3RyaW5nYFxuICogb3IgYFNwYW5uYWJsZVN0cmluZ2AgdGhhdCBjb250YWlucyB0aGUgZm9sbG93aW5nIGluZm9ybWF0aW9uOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIFwiSSBhbSBib2xkIGFuZCByZWRcIlxuICogMC05OiBib2xkXG4gKiA5LTE3OiBib2xkLCByZWRcbiAqIGBgYFxuICpcbiAqICMjIE5lc3RlZCB2aWV3cyAoaU9TIG9ubHkpXG4gKlxuICogT24gaU9TLCB5b3UgY2FuIG5lc3Qgdmlld3Mgd2l0aGluIHlvdXIgVGV4dCBjb21wb25lbnQuIEhlcmUncyBhbiBleGFtcGxlOlxuICpcbiAqIGBgYFJlYWN0TmF0aXZlV2ViUGxheWVyXG4gKiBpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuICogaW1wb3J0IHsgQXBwUmVnaXN0cnksIFRleHQsIFZpZXcgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGNsYXNzIEJsdWVJc0Nvb2wgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICByZW5kZXIoKSB7XG4gKiAgICAgcmV0dXJuIChcbiAqICAgICAgIDxUZXh0PlxuICogICAgICAgICBUaGVyZSBpcyBhIGJsdWUgc3F1YXJlXG4gKiAgICAgICAgIDxWaWV3IHN0eWxlPXt7d2lkdGg6IDUwLCBoZWlnaHQ6IDUwLCBiYWNrZ3JvdW5kQ29sb3I6ICdzdGVlbGJsdWUnfX0gLz5cbiAqICAgICAgICAgaW4gYmV0d2VlbiBteSB0ZXh0LlxuICogICAgICAgPC9UZXh0PlxuICogICAgICk7XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiAvLyBza2lwIHRoaXMgbGluZSBpZiB1c2luZyBDcmVhdGUgUmVhY3QgTmF0aXZlIEFwcFxuICogQXBwUmVnaXN0cnkucmVnaXN0ZXJDb21wb25lbnQoJ0F3ZXNvbWVQcm9qZWN0JywgKCkgPT4gQmx1ZUlzQ29vbCk7XG4gKiBgYGBcbiAqXG4gKiA+IEluIG9yZGVyIHRvIHVzZSB0aGlzIGZlYXR1cmUsIHlvdSBtdXN0IGdpdmUgdGhlIHZpZXcgYSBgd2lkdGhgIGFuZCBhIGBoZWlnaHRgLlxuICpcbiAqICMjIENvbnRhaW5lcnNcbiAqXG4gKiBUaGUgYDxUZXh0PmAgZWxlbWVudCBpcyBzcGVjaWFsIHJlbGF0aXZlIHRvIGxheW91dDogZXZlcnl0aGluZyBpbnNpZGUgaXMgbm9cbiAqIGxvbmdlciB1c2luZyB0aGUgZmxleGJveCBsYXlvdXQgYnV0IHVzaW5nIHRleHQgbGF5b3V0LiBUaGlzIG1lYW5zIHRoYXRcbiAqIGVsZW1lbnRzIGluc2lkZSBvZiBhIGA8VGV4dD5gIGFyZSBubyBsb25nZXIgcmVjdGFuZ2xlcywgYnV0IHdyYXAgd2hlbiB0aGV5XG4gKiBzZWUgdGhlIGVuZCBvZiB0aGUgbGluZS5cbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiA8VGV4dD5cbiAqICAgPFRleHQ+Rmlyc3QgcGFydCBhbmQgPC9UZXh0PlxuICogICA8VGV4dD5zZWNvbmQgcGFydDwvVGV4dD5cbiAqIDwvVGV4dD5cbiAqIC8vIFRleHQgY29udGFpbmVyOiBhbGwgdGhlIHRleHQgZmxvd3MgYXMgaWYgaXQgd2FzIG9uZVxuICogLy8gfEZpcnN0IHBhcnQgfFxuICogLy8gfGFuZCBzZWNvbmQgfFxuICogLy8gfHBhcnQgICAgICAgfFxuICpcbiAqIDxWaWV3PlxuICogICA8VGV4dD5GaXJzdCBwYXJ0IGFuZCA8L1RleHQ+XG4gKiAgIDxUZXh0PnNlY29uZCBwYXJ0PC9UZXh0PlxuICogPC9WaWV3PlxuICogLy8gVmlldyBjb250YWluZXI6IGVhY2ggdGV4dCBpcyBpdHMgb3duIGJsb2NrXG4gKiAvLyB8Rmlyc3QgcGFydCB8XG4gKiAvLyB8YW5kICAgICAgICB8XG4gKiAvLyB8c2Vjb25kIHBhcnR8XG4gKiBgYGBcbiAqXG4gKiAjIyBMaW1pdGVkIFN0eWxlIEluaGVyaXRhbmNlXG4gKlxuICogT24gdGhlIHdlYiwgdGhlIHVzdWFsIHdheSB0byBzZXQgYSBmb250IGZhbWlseSBhbmQgc2l6ZSBmb3IgdGhlIGVudGlyZVxuICogZG9jdW1lbnQgaXMgdG8gdGFrZSBhZHZhbnRhZ2Ugb2YgaW5oZXJpdGVkIENTUyBwcm9wZXJ0aWVzIGxpa2Ugc286XG4gKlxuICogYGBgY3NzXG4gKiBodG1sIHtcbiAqICAgZm9udC1mYW1pbHk6ICdsdWNpZGEgZ3JhbmRlJywgdGFob21hLCB2ZXJkYW5hLCBhcmlhbCwgc2Fucy1zZXJpZjtcbiAqICAgZm9udC1zaXplOiAxMXB4O1xuICogICBjb2xvcjogIzE0MTgyMztcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEFsbCBlbGVtZW50cyBpbiB0aGUgZG9jdW1lbnQgd2lsbCBpbmhlcml0IHRoaXMgZm9udCB1bmxlc3MgdGhleSBvciBvbmUgb2ZcbiAqIHRoZWlyIHBhcmVudHMgc3BlY2lmaWVzIGEgbmV3IHJ1bGUuXG4gKlxuICogSW4gUmVhY3QgTmF0aXZlLCB3ZSBhcmUgbW9yZSBzdHJpY3QgYWJvdXQgaXQ6ICoqeW91IG11c3Qgd3JhcCBhbGwgdGhlIHRleHRcbiAqIG5vZGVzIGluc2lkZSBvZiBhIGA8VGV4dD5gIGNvbXBvbmVudCoqLiBZb3UgY2Fubm90IGhhdmUgYSB0ZXh0IG5vZGUgZGlyZWN0bHlcbiAqIHVuZGVyIGEgYDxWaWV3PmAuXG4gKlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIC8vIEJBRDogd2lsbCByYWlzZSBleGNlcHRpb24sIGNhbid0IGhhdmUgYSB0ZXh0IG5vZGUgYXMgY2hpbGQgb2YgYSA8Vmlldz5cbiAqIDxWaWV3PlxuICogICBTb21lIHRleHRcbiAqIDwvVmlldz5cbiAqXG4gKiAvLyBHT09EXG4gKiA8Vmlldz5cbiAqICAgPFRleHQ+XG4gKiAgICAgU29tZSB0ZXh0XG4gKiAgIDwvVGV4dD5cbiAqIDwvVmlldz5cbiAqIGBgYFxuICpcbiAqIFlvdSBhbHNvIGxvc2UgdGhlIGFiaWxpdHkgdG8gc2V0IHVwIGEgZGVmYXVsdCBmb250IGZvciBhbiBlbnRpcmUgc3VidHJlZS5cbiAqIFRoZSByZWNvbW1lbmRlZCB3YXkgdG8gdXNlIGNvbnNpc3RlbnQgZm9udHMgYW5kIHNpemVzIGFjcm9zcyB5b3VyXG4gKiBhcHBsaWNhdGlvbiBpcyB0byBjcmVhdGUgYSBjb21wb25lbnQgYE15QXBwVGV4dGAgdGhhdCBpbmNsdWRlcyB0aGVtIGFuZCB1c2VcbiAqIHRoaXMgY29tcG9uZW50IGFjcm9zcyB5b3VyIGFwcC4gWW91IGNhbiBhbHNvIHVzZSB0aGlzIGNvbXBvbmVudCB0byBtYWtlIG1vcmVcbiAqIHNwZWNpZmljIGNvbXBvbmVudHMgbGlrZSBgTXlBcHBIZWFkZXJUZXh0YCBmb3Igb3RoZXIga2luZHMgb2YgdGV4dC5cbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiA8Vmlldz5cbiAqICAgPE15QXBwVGV4dD5UZXh0IHN0eWxlZCB3aXRoIHRoZSBkZWZhdWx0IGZvbnQgZm9yIHRoZSBlbnRpcmUgYXBwbGljYXRpb248L015QXBwVGV4dD5cbiAqICAgPE15QXBwSGVhZGVyVGV4dD5UZXh0IHN0eWxlZCBhcyBhIGhlYWRlcjwvTXlBcHBIZWFkZXJUZXh0PlxuICogPC9WaWV3PlxuICogYGBgXG4gKlxuICogQXNzdW1pbmcgdGhhdCBgTXlBcHBUZXh0YCBpcyBhIGNvbXBvbmVudCB0aGF0IHNpbXBseSByZW5kZXJzIG91dCBpdHNcbiAqIGNoaWxkcmVuIGludG8gYSBgVGV4dGAgY29tcG9uZW50IHdpdGggc3R5bGluZywgdGhlbiBgTXlBcHBIZWFkZXJUZXh0YCBjYW4gYmVcbiAqIGRlZmluZWQgYXMgZm9sbG93czpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBjbGFzcyBNeUFwcEhlYWRlclRleHQgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICByZW5kZXIoKSB7XG4gKiAgICAgcmV0dXJuIChcbiAqICAgICAgIDxNeUFwcFRleHQ+XG4gKiAgICAgICAgIDxUZXh0IHN0eWxlPXt7Zm9udFNpemU6IDIwfX0+XG4gKiAgICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gKiAgICAgICAgIDwvVGV4dD5cbiAqICAgICAgIDwvTXlBcHBUZXh0PlxuICogICAgICk7XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICpcbiAqIENvbXBvc2luZyBgTXlBcHBUZXh0YCBpbiB0aGlzIHdheSBlbnN1cmVzIHRoYXQgd2UgZ2V0IHRoZSBzdHlsZXMgZnJvbSBhXG4gKiB0b3AtbGV2ZWwgY29tcG9uZW50LCBidXQgbGVhdmVzIHVzIHRoZSBhYmlsaXR5IHRvIGFkZCAvIG92ZXJyaWRlIHRoZW0gaW5cbiAqIHNwZWNpZmljIHVzZSBjYXNlcy5cbiAqXG4gKiBSZWFjdCBOYXRpdmUgc3RpbGwgaGFzIHRoZSBjb25jZXB0IG9mIHN0eWxlIGluaGVyaXRhbmNlLCBidXQgbGltaXRlZCB0byB0ZXh0XG4gKiBzdWJ0cmVlcy4gSW4gdGhpcyBjYXNlLCB0aGUgc2Vjb25kIHBhcnQgd2lsbCBiZSBib3RoIGJvbGQgYW5kIHJlZC5cbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiA8VGV4dCBzdHlsZT17e2ZvbnRXZWlnaHQ6ICdib2xkJ319PlxuICogICBJIGFtIGJvbGRcbiAqICAgPFRleHQgc3R5bGU9e3tjb2xvcjogJ3JlZCd9fT5cbiAqICAgICBhbmQgcmVkXG4gKiAgIDwvVGV4dD5cbiAqIDwvVGV4dD5cbiAqIGBgYFxuICpcbiAqIFdlIGJlbGlldmUgdGhhdCB0aGlzIG1vcmUgY29uc3RyYWluZWQgd2F5IHRvIHN0eWxlIHRleHQgd2lsbCB5aWVsZCBiZXR0ZXJcbiAqIGFwcHM6XG4gKlxuICogLSAoRGV2ZWxvcGVyKSBSZWFjdCBjb21wb25lbnRzIGFyZSBkZXNpZ25lZCB3aXRoIHN0cm9uZyBpc29sYXRpb24gaW4gbWluZDpcbiAqIFlvdSBzaG91bGQgYmUgYWJsZSB0byBkcm9wIGEgY29tcG9uZW50IGFueXdoZXJlIGluIHlvdXIgYXBwbGljYXRpb24sXG4gKiB0cnVzdGluZyB0aGF0IGFzIGxvbmcgYXMgdGhlIHByb3BzIGFyZSB0aGUgc2FtZSwgaXQgd2lsbCBsb29rIGFuZCBiZWhhdmUgdGhlXG4gKiBzYW1lIHdheS4gVGV4dCBwcm9wZXJ0aWVzIHRoYXQgY291bGQgaW5oZXJpdCBmcm9tIG91dHNpZGUgb2YgdGhlIHByb3BzIHdvdWxkXG4gKiBicmVhayB0aGlzIGlzb2xhdGlvbi5cbiAqXG4gKiAtIChJbXBsZW1lbnRvcikgVGhlIGltcGxlbWVudGF0aW9uIG9mIFJlYWN0IE5hdGl2ZSBpcyBhbHNvIHNpbXBsaWZpZWQuIFdlIGRvXG4gKiBub3QgbmVlZCB0byBoYXZlIGEgYGZvbnRGYW1pbHlgIGZpZWxkIG9uIGV2ZXJ5IHNpbmdsZSBlbGVtZW50LCBhbmQgd2UgZG8gbm90XG4gKiBuZWVkIHRvIHBvdGVudGlhbGx5IHRyYXZlcnNlIHRoZSB0cmVlIHVwIHRvIHRoZSByb290IGV2ZXJ5IHRpbWUgd2UgZGlzcGxheSBhXG4gKiB0ZXh0IG5vZGUuIFRoZSBzdHlsZSBpbmhlcml0YW5jZSBpcyBvbmx5IGVuY29kZWQgaW5zaWRlIG9mIHRoZSBuYXRpdmUgVGV4dFxuICogY29tcG9uZW50IGFuZCBkb2Vzbid0IGxlYWsgdG8gb3RoZXIgY29tcG9uZW50cyBvciB0aGUgc3lzdGVtIGl0c2VsZi5cbiAqXG4gKi9cblxuY29uc3QgVGV4dCA9IGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ1RleHQnLFxuICBwcm9wVHlwZXM6IHtcbiAgICAvKipcbiAgICAgKiBXaGVuIGBudW1iZXJPZkxpbmVzYCBpcyBzZXQsIHRoaXMgcHJvcCBkZWZpbmVzIGhvdyB0ZXh0IHdpbGwgYmUgdHJ1bmNhdGVkLlxuICAgICAqIGBudW1iZXJPZkxpbmVzYCBtdXN0IGJlIHNldCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoaXMgcHJvcC5cbiAgICAgKlxuICAgICAqIFRoaXMgY2FuIGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAgICAgKlxuICAgICAqIC0gYGhlYWRgIC0gVGhlIGxpbmUgaXMgZGlzcGxheWVkIHNvIHRoYXQgdGhlIGVuZCBmaXRzIGluIHRoZSBjb250YWluZXIgYW5kIHRoZSBtaXNzaW5nIHRleHRcbiAgICAgKiBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBsaW5lIGlzIGluZGljYXRlZCBieSBhbiBlbGxpcHNpcyBnbHlwaC4gZS5nLiwgXCIuLi53eHl6XCJcbiAgICAgKiAtIGBtaWRkbGVgIC0gVGhlIGxpbmUgaXMgZGlzcGxheWVkIHNvIHRoYXQgdGhlIGJlZ2lubmluZyBhbmQgZW5kIGZpdCBpbiB0aGUgY29udGFpbmVyIGFuZCB0aGVcbiAgICAgKiBtaXNzaW5nIHRleHQgaW4gdGhlIG1pZGRsZSBpcyBpbmRpY2F0ZWQgYnkgYW4gZWxsaXBzaXMgZ2x5cGguIFwiYWIuLi55elwiXG4gICAgICogLSBgdGFpbGAgLSBUaGUgbGluZSBpcyBkaXNwbGF5ZWQgc28gdGhhdCB0aGUgYmVnaW5uaW5nIGZpdHMgaW4gdGhlIGNvbnRhaW5lciBhbmQgdGhlXG4gICAgICogbWlzc2luZyB0ZXh0IGF0IHRoZSBlbmQgb2YgdGhlIGxpbmUgaXMgaW5kaWNhdGVkIGJ5IGFuIGVsbGlwc2lzIGdseXBoLiBlLmcuLCBcImFiY2QuLi5cIlxuICAgICAqIC0gYGNsaXBgIC0gTGluZXMgYXJlIG5vdCBkcmF3biBwYXN0IHRoZSBlZGdlIG9mIHRoZSB0ZXh0IGNvbnRhaW5lci5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0IGlzIGB0YWlsYC5cbiAgICAgKlxuICAgICAqID4gYGNsaXBgIGlzIHdvcmtpbmcgb25seSBmb3IgaU9TXG4gICAgICovXG4gICAgZWxsaXBzaXplTW9kZTogUHJvcFR5cGVzLm9uZU9mKFsnaGVhZCcsICdtaWRkbGUnLCAndGFpbCcsICdjbGlwJ10pLFxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gdHJ1bmNhdGUgdGhlIHRleHQgd2l0aCBhbiBlbGxpcHNpcyBhZnRlciBjb21wdXRpbmcgdGhlIHRleHRcbiAgICAgKiBsYXlvdXQsIGluY2x1ZGluZyBsaW5lIHdyYXBwaW5nLCBzdWNoIHRoYXQgdGhlIHRvdGFsIG51bWJlciBvZiBsaW5lc1xuICAgICAqIGRvZXMgbm90IGV4Y2VlZCB0aGlzIG51bWJlci5cbiAgICAgKlxuICAgICAqIFRoaXMgcHJvcCBpcyBjb21tb25seSB1c2VkIHdpdGggYGVsbGlwc2l6ZU1vZGVgLlxuICAgICAqL1xuICAgIG51bWJlck9mTGluZXM6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgLyoqXG4gICAgICogU2V0IHRleHQgYnJlYWsgc3RyYXRlZ3kgb24gQW5kcm9pZCBBUEkgTGV2ZWwgMjMrLCBwb3NzaWJsZSB2YWx1ZXMgYXJlIGBzaW1wbGVgLCBgaGlnaFF1YWxpdHlgLCBgYmFsYW5jZWRgXG4gICAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGhpZ2hRdWFsaXR5YC5cbiAgICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgICAqL1xuICAgIHRleHRCcmVha1N0cmF0ZWd5OiBQcm9wVHlwZXMub25lT2YoWydzaW1wbGUnLCAnaGlnaFF1YWxpdHknLCAnYmFsYW5jZWQnXSksXG4gICAgLyoqXG4gICAgICogSW52b2tlZCBvbiBtb3VudCBhbmQgbGF5b3V0IGNoYW5nZXMgd2l0aFxuICAgICAqXG4gICAgICogICBge25hdGl2ZUV2ZW50OiB7bGF5b3V0OiB7eCwgeSwgd2lkdGgsIGhlaWdodH19fWBcbiAgICAgKi9cbiAgICBvbkxheW91dDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gcHJlc3MuXG4gICAgICpcbiAgICAgKiBlLmcuLCBgb25QcmVzcz17KCkgPT4gY29uc29sZS5sb2coJzFzdCcpfWBcbiAgICAgKi9cbiAgICBvblByZXNzOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBsb25nIHByZXNzLlxuICAgICAqXG4gICAgICogZS5nLiwgYG9uTG9uZ1ByZXNzPXt0aGlzLmluY3JlYXNlU2l6ZX0+YFxuICAgICAqL1xuICAgIG9uTG9uZ1ByZXNzOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZSBzY3JvbGwgdmlldyBpcyBkaXNhYmxlZCwgdGhpcyBkZWZpbmVzIGhvdyBmYXIgeW91ciB0b3VjaCBtYXlcbiAgICAgKiBtb3ZlIG9mZiBvZiB0aGUgYnV0dG9uLCBiZWZvcmUgZGVhY3RpdmF0aW5nIHRoZSBidXR0b24uIE9uY2UgZGVhY3RpdmF0ZWQsXG4gICAgICogdHJ5IG1vdmluZyBpdCBiYWNrIGFuZCB5b3UnbGwgc2VlIHRoYXQgdGhlIGJ1dHRvbiBpcyBvbmNlIGFnYWluXG4gICAgICogcmVhY3RpdmF0ZWQhIE1vdmUgaXQgYmFjayBhbmQgZm9ydGggc2V2ZXJhbCB0aW1lcyB3aGlsZSB0aGUgc2Nyb2xsIHZpZXdcbiAgICAgKiBpcyBkaXNhYmxlZC4gRW5zdXJlIHlvdSBwYXNzIGluIGEgY29uc3RhbnQgdG8gcmVkdWNlIG1lbW9yeSBhbGxvY2F0aW9ucy5cbiAgICAgKi9cbiAgICBwcmVzc1JldGVudGlvbk9mZnNldDogRWRnZUluc2V0c1Byb3BUeXBlLFxuICAgIC8qKlxuICAgICAqIExldHMgdGhlIHVzZXIgc2VsZWN0IHRleHQsIHRvIHVzZSB0aGUgbmF0aXZlIGNvcHkgYW5kIHBhc3RlIGZ1bmN0aW9uYWxpdHkuXG4gICAgICovXG4gICAgc2VsZWN0YWJsZTogUHJvcFR5cGVzLmJvb2wsXG4gICAgLyoqXG4gICAgICogVGhlIGhpZ2hsaWdodCBjb2xvciBvZiB0aGUgdGV4dC5cbiAgICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgICAqL1xuICAgIHNlbGVjdGlvbkNvbG9yOiBDb2xvclByb3BUeXBlLFxuICAgIC8qKlxuICAgICAqIFdoZW4gYHRydWVgLCBubyB2aXN1YWwgY2hhbmdlIGlzIG1hZGUgd2hlbiB0ZXh0IGlzIHByZXNzZWQgZG93bi4gQnlcbiAgICAgKiBkZWZhdWx0LCBhIGdyYXkgb3ZhbCBoaWdobGlnaHRzIHRoZSB0ZXh0IG9uIHByZXNzIGRvd24uXG4gICAgICogQHBsYXRmb3JtIGlvc1xuICAgICAqL1xuICAgIHN1cHByZXNzSGlnaGxpZ2h0aW5nOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBzdHlsZTogc3R5bGVQcm9wVHlwZSxcbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGxvY2F0ZSB0aGlzIHZpZXcgaW4gZW5kLXRvLWVuZCB0ZXN0cy5cbiAgICAgKi9cbiAgICB0ZXN0SUQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgLyoqXG4gICAgICogVXNlZCB0byBsb2NhdGUgdGhpcyB2aWV3IGZyb20gbmF0aXZlIGNvZGUuXG4gICAgICovXG4gICAgbmF0aXZlSUQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHdoZXRoZXIgZm9udHMgc2hvdWxkIHNjYWxlIHRvIHJlc3BlY3QgVGV4dCBTaXplIGFjY2Vzc2liaWxpdHkgc2V0dGluZ3MuIFRoZVxuICAgICAqIGRlZmF1bHQgaXMgYHRydWVgLlxuICAgICAqL1xuICAgIGFsbG93Rm9udFNjYWxpbmc6IFByb3BUeXBlcy5ib29sLFxuICAgIC8qKlxuICAgICAqIFdoZW4gc2V0IHRvIGB0cnVlYCwgaW5kaWNhdGVzIHRoYXQgdGhlIHZpZXcgaXMgYW4gYWNjZXNzaWJpbGl0eSBlbGVtZW50LiBUaGUgZGVmYXVsdCB2YWx1ZVxuICAgICAqIGZvciBhIGBUZXh0YCBlbGVtZW50IGlzIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIFNlZSB0aGVcbiAgICAgKiBbQWNjZXNzaWJpbGl0eSBndWlkZV0oZG9jcy9hY2Nlc3NpYmlsaXR5Lmh0bWwjYWNjZXNzaWJsZS1pb3MtYW5kcm9pZClcbiAgICAgKiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKi9cbiAgICBhY2Nlc3NpYmxlOiBQcm9wVHlwZXMuYm9vbCxcbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgd2hldGhlciBmb250IHNob3VsZCBiZSBzY2FsZWQgZG93biBhdXRvbWF0aWNhbGx5IHRvIGZpdCBnaXZlbiBzdHlsZSBjb25zdHJhaW50cy5cbiAgICAgKiBAcGxhdGZvcm0gaW9zXG4gICAgICovXG4gICAgYWRqdXN0c0ZvbnRTaXplVG9GaXQ6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHNtYWxsZXN0IHBvc3NpYmxlIHNjYWxlIGEgZm9udCBjYW4gcmVhY2ggd2hlbiBhZGp1c3RzRm9udFNpemVUb0ZpdCBpcyBlbmFibGVkLiAodmFsdWVzIDAuMDEtMS4wKS5cbiAgICAgKiBAcGxhdGZvcm0gaW9zXG4gICAgICovXG4gICAgbWluaW11bUZvbnRTY2FsZTogUHJvcFR5cGVzLm51bWJlcixcbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSB0ZXh0IHZpZXcgZm9yIHRlc3RpbmcgcHVycG9zZXNcbiAgICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgICAqL1xuICAgIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgfSxcbiAgZ2V0RGVmYXVsdFByb3BzKCk6IE9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjY2Vzc2libGU6IHRydWUsXG4gICAgICBhbGxvd0ZvbnRTY2FsaW5nOiB0cnVlLFxuICAgICAgZWxsaXBzaXplTW9kZTogJ3RhaWwnLFxuICAgIH07XG4gIH0sXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKTogT2JqZWN0IHtcbiAgICByZXR1cm4gbWVyZ2VGYXN0KFRvdWNoYWJsZS5NaXhpbi50b3VjaGFibGVHZXRJbml0aWFsU3RhdGUoKSwge1xuICAgICAgaXNIaWdobGlnaHRlZDogZmFsc2UsXG4gICAgfSk7XG4gIH0sXG4gIG1peGluczogW05hdGl2ZU1ldGhvZHNNaXhpbl0sXG4gIHZpZXdDb25maWc6IHZpZXdDb25maWcsXG4gIGdldENoaWxkQ29udGV4dCgpOiBPYmplY3Qge1xuICAgIHJldHVybiB7aXNJbkFQYXJlbnRUZXh0OiB0cnVlfTtcbiAgfSxcbiAgY2hpbGRDb250ZXh0VHlwZXM6IHtcbiAgICBpc0luQVBhcmVudFRleHQ6IFByb3BUeXBlcy5ib29sXG4gIH0sXG4gIGNvbnRleHRUeXBlczoge1xuICAgIGlzSW5BUGFyZW50VGV4dDogUHJvcFR5cGVzLmJvb2xcbiAgfSxcbiAgLyoqXG4gICAqIE9ubHkgYXNzaWduZWQgaWYgdG91Y2ggaXMgbmVlZGVkLlxuICAgKi9cbiAgX2hhbmRsZXJzOiAobnVsbDogP09iamVjdCksXG4gIF9oYXNQcmVzc0hhbmRsZXIoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhdGhpcy5wcm9wcy5vblByZXNzIHx8ICEhdGhpcy5wcm9wcy5vbkxvbmdQcmVzcztcbiAgfSxcbiAgLyoqXG4gICAqIFRoZXNlIGFyZSBhc3NpZ25lZCBsYXppbHkgdGhlIGZpcnN0IHRpbWUgdGhlIHJlc3BvbmRlciBpcyBzZXQgdG8gbWFrZSBwbGFpblxuICAgKiB0ZXh0IG5vZGVzIGFzIGNoZWFwIGFzIHBvc3NpYmxlLlxuICAgKi9cbiAgdG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbjogKG51bGw6ID9GdW5jdGlvbiksXG4gIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0OiAobnVsbDogP0Z1bmN0aW9uKSxcbiAgdG91Y2hhYmxlSGFuZGxlUHJlc3M6IChudWxsOiA/RnVuY3Rpb24pLFxuICB0b3VjaGFibGVIYW5kbGVMb25nUHJlc3M6IChudWxsOiA/RnVuY3Rpb24pLFxuICB0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQ6IChudWxsOiA/RnVuY3Rpb24pLFxuICByZW5kZXIoKTogUmVhY3QuRWxlbWVudDxhbnk+IHtcbiAgICBsZXQgbmV3UHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIGlmICh0aGlzLnByb3BzLm9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXIgfHwgdGhpcy5faGFzUHJlc3NIYW5kbGVyKCkpIHtcbiAgICAgIGlmICghdGhpcy5faGFuZGxlcnMpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlcnMgPSB7XG4gICAgICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlcjogKCk6IGJvb2wgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2hvdWxkU2V0RnJvbVByb3BzID0gdGhpcy5wcm9wcy5vblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyICYmXG4gICAgICAgICAgICAgICAgLy8gJEZsb3dGaXhNZSg+PTAuNDEuMClcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHNldFJlc3BvbmRlciA9IHNob3VsZFNldEZyb21Qcm9wcyB8fCB0aGlzLl9oYXNQcmVzc0hhbmRsZXIoKTtcbiAgICAgICAgICAgIGlmIChzZXRSZXNwb25kZXIgJiYgIXRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbikge1xuICAgICAgICAgICAgICAvLyBBdHRhY2ggYW5kIGJpbmQgYWxsIHRoZSBvdGhlciBoYW5kbGVycyBvbmx5IHRoZSBmaXJzdCB0aW1lIGEgdG91Y2hcbiAgICAgICAgICAgICAgLy8gYWN0dWFsbHkgaGFwcGVucy5cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gVG91Y2hhYmxlLk1peGluKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBUb3VjaGFibGUuTWl4aW5ba2V5XSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgKHRoaXM6IGFueSlba2V5XSA9IFRvdWNoYWJsZS5NaXhpbltrZXldLmJpbmQodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5zdXBwcmVzc0hpZ2hsaWdodGluZyB8fCAhdGhpcy5faGFzUHJlc3NIYW5kbGVyKCkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICBpc0hpZ2hsaWdodGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuc3VwcHJlc3NIaWdobGlnaHRpbmcgfHwgIXRoaXMuX2hhc1ByZXNzSGFuZGxlcigpKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgaXNIaWdobGlnaHRlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVQcmVzcyA9IChlOiBTeW50aGV0aWNFdmVudDw+KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vblByZXNzICYmIHRoaXMucHJvcHMub25QcmVzcyhlKTtcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICB0aGlzLnRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzcyA9IChlOiBTeW50aGV0aWNFdmVudDw+KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkxvbmdQcmVzcyAmJiB0aGlzLnByb3BzLm9uTG9uZ1ByZXNzKGUpO1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIHRoaXMudG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0ID0gZnVuY3Rpb24oKTogUmVjdE9mZnNldCB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMucHJlc3NSZXRlbnRpb25PZmZzZXQgfHwgUFJFU1NfUkVDVF9PRkZTRVQ7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2V0UmVzcG9uZGVyO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25SZXNwb25kZXJHcmFudDogZnVuY3Rpb24oZTogU3ludGhldGljRXZlbnQ8PiwgZGlzcGF0Y2hJRDogc3RyaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlckdyYW50KGUsIGRpc3BhdGNoSUQpO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vblJlc3BvbmRlckdyYW50ICYmXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMub25SZXNwb25kZXJHcmFudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgICAgICBvblJlc3BvbmRlck1vdmU6IGZ1bmN0aW9uKGU6IFN5bnRoZXRpY0V2ZW50PD4pIHtcbiAgICAgICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyTW92ZShlKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25SZXNwb25kZXJNb3ZlICYmXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMub25SZXNwb25kZXJNb3ZlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgICAgIG9uUmVzcG9uZGVyUmVsZWFzZTogZnVuY3Rpb24oZTogU3ludGhldGljRXZlbnQ8Pikge1xuICAgICAgICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlKGUpO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vblJlc3BvbmRlclJlbGVhc2UgJiZcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vblJlc3BvbmRlclJlbGVhc2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICB9LmJpbmQodGhpcyksXG4gICAgICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGU6IGZ1bmN0aW9uKGU6IFN5bnRoZXRpY0V2ZW50PD4pIHtcbiAgICAgICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRlKGUpO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vblJlc3BvbmRlclRlcm1pbmF0ZSAmJlxuICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uUmVzcG9uZGVyVGVybWluYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0OiBmdW5jdGlvbigpOiBib29sIHtcbiAgICAgICAgICAgIC8vIEFsbG93IHRvdWNoYWJsZSBvciBwcm9wcy5vblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCB0byBkZW55XG4gICAgICAgICAgICAvLyB0aGUgcmVxdWVzdFxuICAgICAgICAgICAgdmFyIGFsbG93VGVybWluYXRpb24gPSB0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCgpO1xuICAgICAgICAgICAgaWYgKGFsbG93VGVybWluYXRpb24gJiYgdGhpcy5wcm9wcy5vblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCkge1xuICAgICAgICAgICAgICBhbGxvd1Rlcm1pbmF0aW9uID0gdGhpcy5wcm9wcy5vblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFsbG93VGVybWluYXRpb247XG4gICAgICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgbmV3UHJvcHMgPSB7XG4gICAgICAgIC4uLnRoaXMucHJvcHMsXG4gICAgICAgIC4uLnRoaXMuX2hhbmRsZXJzLFxuICAgICAgICBpc0hpZ2hsaWdodGVkOiB0aGlzLnN0YXRlLmlzSGlnaGxpZ2h0ZWQsXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobmV3UHJvcHMuc2VsZWN0aW9uQ29sb3IgIT0gbnVsbCkge1xuICAgICAgbmV3UHJvcHMgPSB7XG4gICAgICAgIC4uLm5ld1Byb3BzLFxuICAgICAgICBzZWxlY3Rpb25Db2xvcjogcHJvY2Vzc0NvbG9yKG5ld1Byb3BzLnNlbGVjdGlvbkNvbG9yKVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKFRvdWNoYWJsZS5UT1VDSF9UQVJHRVRfREVCVUcgJiYgbmV3UHJvcHMub25QcmVzcykge1xuICAgICAgbmV3UHJvcHMgPSB7XG4gICAgICAgIC4uLm5ld1Byb3BzLFxuICAgICAgICBzdHlsZTogW3RoaXMucHJvcHMuc3R5bGUsIHtjb2xvcjogJ21hZ2VudGEnfV0sXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAodGhpcy5jb250ZXh0LmlzSW5BUGFyZW50VGV4dCkge1xuICAgICAgcmV0dXJuIDxSQ1RWaXJ0dWFsVGV4dCB7Li4ubmV3UHJvcHN9IC8+O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gPFJDVFRleHQgey4uLm5ld1Byb3BzfSAvPjtcbiAgICB9XG4gIH0sXG59KTtcblxudHlwZSBSZWN0T2Zmc2V0ID0ge1xuICB0b3A6IG51bWJlcixcbiAgbGVmdDogbnVtYmVyLFxuICByaWdodDogbnVtYmVyLFxuICBib3R0b206IG51bWJlcixcbn1cblxudmFyIFBSRVNTX1JFQ1RfT0ZGU0VUID0ge3RvcDogMjAsIGxlZnQ6IDIwLCByaWdodDogMjAsIGJvdHRvbTogMzB9O1xuXG52YXIgUkNUVGV4dCA9IGNyZWF0ZVJlYWN0TmF0aXZlQ29tcG9uZW50Q2xhc3MoXG4gIHZpZXdDb25maWcudWlWaWV3Q2xhc3NOYW1lLFxuICAoKSA9PiB2aWV3Q29uZmlnXG4pO1xudmFyIFJDVFZpcnR1YWxUZXh0ID0gUkNUVGV4dDtcblxuaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcpIHtcbiAgUkNUVmlydHVhbFRleHQgPSBjcmVhdGVSZWFjdE5hdGl2ZUNvbXBvbmVudENsYXNzKCdSQ1RWaXJ0dWFsVGV4dCcsICgpID0+ICh7XG4gICAgdmFsaWRBdHRyaWJ1dGVzOiBtZXJnZUZhc3QoUmVhY3ROYXRpdmVWaWV3QXR0cmlidXRlcy5VSVZpZXcsIHtcbiAgICAgIGlzSGlnaGxpZ2h0ZWQ6IHRydWUsXG4gICAgfSksXG4gICAgdWlWaWV3Q2xhc3NOYW1lOiAnUkNUVmlydHVhbFRleHQnLFxuICB9KSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVGV4dDtcbiJdfQ==