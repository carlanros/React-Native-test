114d7530515a86e7bc72dfd0afa659d4
'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var mixInEventEmitter=require('mixInEventEmitter');var DocumentSelectionState=function(){function DocumentSelectionState(anchor,focus){_classCallCheck(this,DocumentSelectionState);this._anchorOffset=anchor;this._focusOffset=focus;this._hasFocus=false;}_createClass(DocumentSelectionState,[{key:'update',value:function update(anchor,focus){if(this._anchorOffset!==anchor||this._focusOffset!==focus){this._anchorOffset=anchor;this._focusOffset=focus;this.emit('update');}}},{key:'constrainLength',value:function constrainLength(maxLength){this.update(Math.min(this._anchorOffset,maxLength),Math.min(this._focusOffset,maxLength));}},{key:'focus',value:function focus(){if(!this._hasFocus){this._hasFocus=true;this.emit('focus');}}},{key:'blur',value:function blur(){if(this._hasFocus){this._hasFocus=false;this.emit('blur');}}},{key:'hasFocus',value:function hasFocus(){return this._hasFocus;}},{key:'isCollapsed',value:function isCollapsed(){return this._anchorOffset===this._focusOffset;}},{key:'isBackward',value:function isBackward(){return this._anchorOffset>this._focusOffset;}},{key:'getAnchorOffset',value:function getAnchorOffset(){return this._hasFocus?this._anchorOffset:null;}},{key:'getFocusOffset',value:function getFocusOffset(){return this._hasFocus?this._focusOffset:null;}},{key:'getStartOffset',value:function getStartOffset(){return this._hasFocus?Math.min(this._anchorOffset,this._focusOffset):null;}},{key:'getEndOffset',value:function getEndOffset(){return this._hasFocus?Math.max(this._anchorOffset,this._focusOffset):null;}},{key:'overlaps',value:function overlaps(start,end){return this.hasFocus()&&this.getStartOffset()<=end&&start<=this.getEndOffset();}}]);return DocumentSelectionState;}();mixInEventEmitter(DocumentSelectionState,{'blur':true,'focus':true,'update':true});module.exports=DocumentSelectionState;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRvY3VtZW50U2VsZWN0aW9uU3RhdGUuanMiXSwibmFtZXMiOlsibWl4SW5FdmVudEVtaXR0ZXIiLCJyZXF1aXJlIiwiRG9jdW1lbnRTZWxlY3Rpb25TdGF0ZSIsImFuY2hvciIsImZvY3VzIiwiX2FuY2hvck9mZnNldCIsIl9mb2N1c09mZnNldCIsIl9oYXNGb2N1cyIsImVtaXQiLCJtYXhMZW5ndGgiLCJ1cGRhdGUiLCJNYXRoIiwibWluIiwibWF4Iiwic3RhcnQiLCJlbmQiLCJoYXNGb2N1cyIsImdldFN0YXJ0T2Zmc2V0IiwiZ2V0RW5kT2Zmc2V0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBWUEsYSwrb0JBRUEsR0FBSUEsbUJBQW9CQyxPQUFwQixxQkFBSixDLEdBV01DLHVCLFlBS0osZ0NBQVlDLE1BQVosQ0FBb0JDLEtBQXBCLENBQTJCLDhDQUN6QixLQUFLQyxhQUFMLENBQXFCRixNQUFyQixDQUNBLEtBQUtHLFlBQUwsQ0FBb0JGLEtBQXBCLENBQ0EsS0FBS0csU0FBTCxDQUFpQixLQUFqQixDQUNELEMseUVBU01KLE0sQ0FBUUMsSyxDQUFPLENBQ3BCLEdBQUksS0FBS0MsYUFBTCxHQUF1QkYsTUFBdkIsRUFBaUMsS0FBS0csWUFBTCxHQUFzQkYsS0FBM0QsQ0FBa0UsQ0FDaEUsS0FBS0MsYUFBTCxDQUFxQkYsTUFBckIsQ0FDQSxLQUFLRyxZQUFMLENBQW9CRixLQUFwQixDQUNBLEtBQUtJLElBQUwsQ0FBVSxRQUFWLEVBQ0QsQ0FDRixDLHdEQVFlQyxTLENBQVcsQ0FDekIsS0FBS0MsTUFBTCxDQUNFQyxLQUFLQyxHQUFMLENBQVMsS0FBS1AsYUFBZCxDQUE2QkksU0FBN0IsQ0FERixDQUVFRSxLQUFLQyxHQUFMLENBQVMsS0FBS04sWUFBZCxDQUE0QkcsU0FBNUIsQ0FGRixFQUlELEMscUNBRU8sQ0FDTixHQUFJLENBQUMsS0FBS0YsU0FBVixDQUFxQixDQUNuQixLQUFLQSxTQUFMLENBQWlCLElBQWpCLENBQ0EsS0FBS0MsSUFBTCxDQUFVLE9BQVYsRUFDRCxDQUNGLEMsbUNBRU0sQ0FDTCxHQUFJLEtBQUtELFNBQVQsQ0FBb0IsQ0FDbEIsS0FBS0EsU0FBTCxDQUFpQixLQUFqQixDQUNBLEtBQUtDLElBQUwsQ0FBVSxNQUFWLEVBQ0QsQ0FDRixDLDJDQUtVLENBQ1QsTUFBTyxNQUFLRCxTQUFaLENBQ0QsQyxpREFLYSxDQUNaLE1BQU8sTUFBS0YsYUFBTCxHQUF1QixLQUFLQyxZQUFuQyxDQUNELEMsK0NBS1ksQ0FDWCxNQUFPLE1BQUtELGFBQUwsQ0FBcUIsS0FBS0MsWUFBakMsQ0FDRCxDLHlEQUtpQixDQUNoQixNQUFPLE1BQUtDLFNBQUwsQ0FBaUIsS0FBS0YsYUFBdEIsQ0FBc0MsSUFBN0MsQ0FDRCxDLHVEQUtnQixDQUNmLE1BQU8sTUFBS0UsU0FBTCxDQUFpQixLQUFLRCxZQUF0QixDQUFxQyxJQUE1QyxDQUNELEMsdURBS2dCLENBQ2YsTUFDRSxNQUFLQyxTQUFMLENBQWlCSSxLQUFLQyxHQUFMLENBQVMsS0FBS1AsYUFBZCxDQUE2QixLQUFLQyxZQUFsQyxDQUFqQixDQUFtRSxJQURyRSxDQUdELEMsbURBS2MsQ0FDYixNQUNFLE1BQUtDLFNBQUwsQ0FBaUJJLEtBQUtFLEdBQUwsQ0FBUyxLQUFLUixhQUFkLENBQTZCLEtBQUtDLFlBQWxDLENBQWpCLENBQW1FLElBRHJFLENBR0QsQywwQ0FPUVEsSyxDQUFPQyxHLENBQUssQ0FDbkIsTUFDRSxNQUFLQyxRQUFMLElBQ0EsS0FBS0MsY0FBTCxJQUF5QkYsR0FEekIsRUFDZ0NELE9BQVMsS0FBS0ksWUFBTCxFQUYzQyxDQUlELEMsc0NBR0hsQixrQkFBa0JFLHNCQUFsQixDQUEwQyxDQUN4QyxPQUFRLElBRGdDLENBRXhDLFFBQVMsSUFGK0IsQ0FHeEMsU0FBVSxJQUg4QixDQUExQyxFQU1BaUIsT0FBT0MsT0FBUCxDQUFpQmxCLHNCQUFqQiIsImZpbGUiOiJEb2N1bWVudFNlbGVjdGlvblN0YXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBEb2N1bWVudFNlbGVjdGlvblN0YXRlXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIG1peEluRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnbWl4SW5FdmVudEVtaXR0ZXInKTtcblxuLyoqXG4gKiBEb2N1bWVudFNlbGVjdGlvblN0YXRlIGlzIHJlc3BvbnNpYmxlIGZvciBtYWludGFpbmluZyBzZWxlY3Rpb24gaW5mb3JtYXRpb25cbiAqIGZvciBhIGRvY3VtZW50LlxuICpcbiAqIEl0IGlzIGludGVuZGVkIGZvciB1c2UgYnkgQWJzdHJhY3RUZXh0RWRpdG9yLWJhc2VkIGNvbXBvbmVudHMgZm9yXG4gKiBpZGVudGlmeWluZyB0aGUgYXBwcm9wcmlhdGUgc3RhcnQvZW5kIHBvc2l0aW9ucyB0byBtb2RpZnkgdGhlXG4gKiBEb2N1bWVudENvbnRlbnQsIGFuZCBmb3IgcHJvZ3JhbWF0aWNhbGx5IHNldHRpbmcgYnJvd3NlciBzZWxlY3Rpb24gd2hlblxuICogY29tcG9uZW50cyByZS1yZW5kZXIuXG4gKi9cbmNsYXNzIERvY3VtZW50U2VsZWN0aW9uU3RhdGUge1xuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IGFuY2hvclxuICAgKiBAcGFyYW0ge251bWJlcn0gZm9jdXNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGFuY2hvciwgZm9jdXMpIHtcbiAgICB0aGlzLl9hbmNob3JPZmZzZXQgPSBhbmNob3I7XG4gICAgdGhpcy5fZm9jdXNPZmZzZXQgPSBmb2N1cztcbiAgICB0aGlzLl9oYXNGb2N1cyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGFuIHVwZGF0ZSB0byB0aGUgc3RhdGUuIElmIGVpdGhlciBvZmZzZXQgdmFsdWUgaGFzIGNoYW5nZWQsXG4gICAqIHNldCB0aGUgdmFsdWVzIGFuZCBlbWl0IHRoZSBgY2hhbmdlYCBldmVudC4gT3RoZXJ3aXNlIG5vLW9wLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gYW5jaG9yXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBmb2N1c1xuICAgKi9cbiAgdXBkYXRlKGFuY2hvciwgZm9jdXMpIHtcbiAgICBpZiAodGhpcy5fYW5jaG9yT2Zmc2V0ICE9PSBhbmNob3IgfHwgdGhpcy5fZm9jdXNPZmZzZXQgIT09IGZvY3VzKSB7XG4gICAgICB0aGlzLl9hbmNob3JPZmZzZXQgPSBhbmNob3I7XG4gICAgICB0aGlzLl9mb2N1c09mZnNldCA9IGZvY3VzO1xuICAgICAgdGhpcy5lbWl0KCd1cGRhdGUnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2l2ZW4gYSBtYXggdGV4dCBsZW5ndGgsIGNvbnN0cmFpbiBvdXIgc2VsZWN0aW9uIG9mZnNldHMgdG8gZW5zdXJlXG4gICAqIHRoYXQgdGhlIHNlbGVjdGlvbiByZW1haW5zIHN0cmljdGx5IHdpdGhpbiB0aGUgdGV4dCByYW5nZS5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heExlbmd0aFxuICAgKi9cbiAgY29uc3RyYWluTGVuZ3RoKG1heExlbmd0aCkge1xuICAgIHRoaXMudXBkYXRlKFxuICAgICAgTWF0aC5taW4odGhpcy5fYW5jaG9yT2Zmc2V0LCBtYXhMZW5ndGgpLFxuICAgICAgTWF0aC5taW4odGhpcy5fZm9jdXNPZmZzZXQsIG1heExlbmd0aClcbiAgICApO1xuICB9XG5cbiAgZm9jdXMoKSB7XG4gICAgaWYgKCF0aGlzLl9oYXNGb2N1cykge1xuICAgICAgdGhpcy5faGFzRm9jdXMgPSB0cnVlO1xuICAgICAgdGhpcy5lbWl0KCdmb2N1cycpO1xuICAgIH1cbiAgfVxuXG4gIGJsdXIoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ZvY3VzKSB7XG4gICAgICB0aGlzLl9oYXNGb2N1cyA9IGZhbHNlO1xuICAgICAgdGhpcy5lbWl0KCdibHVyJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBoYXNGb2N1cygpIHtcbiAgICByZXR1cm4gdGhpcy5faGFzRm9jdXM7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzQ29sbGFwc2VkKCkge1xuICAgIHJldHVybiB0aGlzLl9hbmNob3JPZmZzZXQgPT09IHRoaXMuX2ZvY3VzT2Zmc2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0JhY2t3YXJkKCkge1xuICAgIHJldHVybiB0aGlzLl9hbmNob3JPZmZzZXQgPiB0aGlzLl9mb2N1c09mZnNldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/bnVtYmVyfVxuICAgKi9cbiAgZ2V0QW5jaG9yT2Zmc2V0KCkge1xuICAgIHJldHVybiB0aGlzLl9oYXNGb2N1cyA/IHRoaXMuX2FuY2hvck9mZnNldCA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P251bWJlcn1cbiAgICovXG4gIGdldEZvY3VzT2Zmc2V0KCkge1xuICAgIHJldHVybiB0aGlzLl9oYXNGb2N1cyA/IHRoaXMuX2ZvY3VzT2Zmc2V0IDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/bnVtYmVyfVxuICAgKi9cbiAgZ2V0U3RhcnRPZmZzZXQoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuX2hhc0ZvY3VzID8gTWF0aC5taW4odGhpcy5fYW5jaG9yT2Zmc2V0LCB0aGlzLl9mb2N1c09mZnNldCkgOiBudWxsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/bnVtYmVyfVxuICAgKi9cbiAgZ2V0RW5kT2Zmc2V0KCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLl9oYXNGb2N1cyA/IE1hdGgubWF4KHRoaXMuX2FuY2hvck9mZnNldCwgdGhpcy5fZm9jdXNPZmZzZXQpIDogbnVsbFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlbmRcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIG92ZXJsYXBzKHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5oYXNGb2N1cygpICYmXG4gICAgICB0aGlzLmdldFN0YXJ0T2Zmc2V0KCkgPD0gZW5kICYmIHN0YXJ0IDw9IHRoaXMuZ2V0RW5kT2Zmc2V0KClcbiAgICApO1xuICB9XG59XG5cbm1peEluRXZlbnRFbWl0dGVyKERvY3VtZW50U2VsZWN0aW9uU3RhdGUsIHtcbiAgJ2JsdXInOiB0cnVlLFxuICAnZm9jdXMnOiB0cnVlLFxuICAndXBkYXRlJzogdHJ1ZVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gRG9jdW1lbnRTZWxlY3Rpb25TdGF0ZTtcbiJdfQ==